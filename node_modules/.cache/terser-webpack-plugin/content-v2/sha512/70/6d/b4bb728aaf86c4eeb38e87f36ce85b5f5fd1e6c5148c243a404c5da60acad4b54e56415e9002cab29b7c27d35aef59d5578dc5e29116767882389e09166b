{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[254],{1083:function(e,t,s){\"use strict\";s.r(t);var a=s(42),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"kubeadm安装kubernetes\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#kubeadm安装kubernetes\"}},[e._v(\"#\")]),e._v(\" Kubeadm安装Kubernetes\")]),e._v(\" \"),s(\"p\",[e._v(\"Kubernetes 从1.4 版本开始后引入了kubeadm 用于简化集群搭建的过程\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"_1-安装\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-安装\"}},[e._v(\"#\")]),e._v(\" 1. 安装\")]),e._v(\" \"),s(\"h3\",{attrs:{id:\"_1-1-配置国内的kubernetes源\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-1-配置国内的kubernetes源\"}},[e._v(\"#\")]),e._v(\" 1.1 配置国内的kubernetes源\")]),e._v(\" \"),s(\"p\",[e._v(\"在/etc/yum.repos.d/ 目录下新建kubernetes.repo 文件，内容如下\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[e._v(\"[kubernetes]\\nname=Kubernetes\\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/\\nenabled=1\\ngpgcheck=1\\nrepo_gpgcheck=1\\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\\n\")])])]),s(\"h3\",{attrs:{id:\"_1-2-安装kubelet、kubeadm和kubectl工具\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-2-安装kubelet、kubeadm和kubectl工具\"}},[e._v(\"#\")]),e._v(\" 1.2 安装kubelet、kubeadm和kubectl工具：\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[e._v(\"yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes\\n\\n\")])])]),s(\"h3\",{attrs:{id:\"_1-3-启动kubelet并设置开机自启\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-3-启动kubelet并设置开机自启\"}},[e._v(\"#\")]),e._v(\" 1.3 启动kubelet并设置开机自启\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[e._v(\"systemctl enable kubelet && systemctl start kubelet\\n\")])])]),s(\"h3\",{attrs:{id:\"_1-4-启动kubernetes-的master节点\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-4-启动kubernetes-的master节点\"}},[e._v(\"#\")]),e._v(\" 1.4 启动kubernetes 的master节点\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[e._v(\"kubeadm init --kubernetes-version=v1.17.2 \\\\\\n--pod-network-cidr=10.244.0.0/16 \\\\\\n--service-cidr=10.1.0.0/16 \\\\\\n--apiserver-advertise-address=120.79.200.111 \\\\\\n--image-repository registry.aliyuncs.com/google_containers\\n\")])])]),s(\"p\",[e._v(\"配置含义如下：\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"kubernetes-version: 用于指定k8s版本，这里指定为最新的1.16.2版本；\")]),e._v(\" \"),s(\"li\",[e._v(\"apiserver-advertise-address：用于指定kube-apiserver监听的ip地址，就是master本机IP地址。\")]),e._v(\" \"),s(\"li\",[e._v(\"pod-network-cidr：因为后面我们选择flannel作为Pod的网络插件，所以这里需要指定Pod的网络范围为10.244.0.0/16\")]),e._v(\" \"),s(\"li\",[e._v(\"service-cidr：用于指定SVC的网络范围；\")]),e._v(\" \"),s(\"li\",[e._v(\"image-repository: 其中默认的镜像仓库k8s.gcr.io没有科学上网的话无法访问，我们可以将它修改为国内的阿里镜像仓库registry.aliyuncs.com/google_containers\")])]),e._v(\" \"),s(\"p\",[e._v(\"启动时，需要拉取镜像，过程比较缓慢耐心等待即可。如果你想先拉好镜像再启动，你可以使用\"),s(\"code\",[e._v(\"kubeadm config images list\")]),e._v(\"命令列出需要拉取的镜像。\")]),e._v(\" \"),s(\"p\",[e._v(\"启动成功后，你会看到类似如下提示:\")])])}),[],!1,null,null,null);t.default=r.exports}}]);","extractedComments":[]}