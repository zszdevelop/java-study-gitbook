{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1293:function(s,a,e){\"use strict\";e.r(a);var r=e(42),t=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[r(\"h1\",{attrs:{id:\"redis安装\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#redis安装\"}},[s._v(\"#\")]),s._v(\" Redis安装\")]),s._v(\" \"),r(\"h2\",{attrs:{id:\"_1-具体安装步骤\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-具体安装步骤\"}},[s._v(\"#\")]),s._v(\" 1. 具体安装步骤\")]),s._v(\" \"),r(\"h3\",{attrs:{id:\"_1-1-使用wget命令下载\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-1-使用wget命令下载\"}},[s._v(\"#\")]),s._v(\" 1.1 使用wget命令下载\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"wget http://download.redis.io/releases/redis-5.0.5.tar.gz\\n\")])])]),r(\"p\",[s._v(\"具体下载哪个版本可以在\"),r(\"a\",{attrs:{href:\"http://download.redis.io/releases/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"redis官网\"),r(\"OutboundLink\")],1),s._v(\"上选择\")]),s._v(\" \"),r(\"h3\",{attrs:{id:\"_1-2-拷贝到-usr-local-下\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-2-拷贝到-usr-local-下\"}},[s._v(\"#\")]),s._v(\" 1.2 拷贝到/usr/local 下\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"cp redis-5.0.5.tar.gz /usr/local\\n\")])])]),r(\"h3\",{attrs:{id:\"_1-3-解压源码\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-3-解压源码\"}},[s._v(\"#\")]),s._v(\" 1.3 解压源码\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"tar -zxvf redis-5.0.5.tar.gz\\n\")])])]),r(\"h3\",{attrs:{id:\"_1-4-编译\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-4-编译\"}},[s._v(\"#\")]),s._v(\" 1.4 编译\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"cd /usr/local/redis-5.0.5\\nmake PREFIX=/usr/local/redis install\\n\")])])]),r(\"p\",[s._v(\"编译后的redis在 \"),r(\"code\",[s._v(\"/usr/local/redis\")]),s._v(\"目录下\")]),s._v(\" \"),r(\"h4\",{attrs:{id:\"_1-4-1-如遇安装异常cc-command-not-found\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-4-1-如遇安装异常cc-command-not-found\"}},[s._v(\"#\")]),s._v(\" 1.4.1 如遇安装异常cc: command not found\")]),s._v(\" \"),r(\"p\",[s._v(\"/bin/sh: cc: command not found\")]),s._v(\" \"),r(\"p\",[r(\"img\",{attrs:{src:e(690),alt:\"image-20191203115107725\"}})]),s._v(\" \"),r(\"p\",[s._v(\"**解决方案：**安装gcc命令\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"yum install gcc\\n\")])])]),r(\"h4\",{attrs:{id:\"_1-4-2-make时报如下错误\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-4-2-make时报如下错误\"}},[s._v(\"#\")]),s._v(\" 1.4.2 make时报如下错误\")]),s._v(\" \"),r(\"p\",[s._v(\"原因是jemalloc重载了Linux下的ANSI C的malloc和free函数。解决办法：make时添加参数。\")]),s._v(\" \"),r(\"h3\",{attrs:{id:\"_1-5-redis的配置文件\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-5-redis的配置文件\"}},[s._v(\"#\")]),s._v(\" 1.5 redis的配置文件\")]),s._v(\" \"),r(\"p\",[s._v(\"redis.conf是redis的配置文件，redis.conf在redis源码目录。\\n拷贝配置文件到安装目录下\\n进入源码目录，里面有一份配置文件 redis.conf，然后将其拷贝到安装路径下\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"cp /usr/local/redis-5.0.5/redis.conf /usr/local/redis/bin/\\n\")])])]),r(\"h2\",{attrs:{id:\"_2-bin目录结构\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-bin目录结构\"}},[s._v(\"#\")]),s._v(\" 2. bin目录结构\")]),s._v(\" \"),r(\"p\",[s._v(\"进入安装目录bin下\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"cd /usr/local/redis/bin\\n\")])])]),r(\"p\",[s._v(\"目录结构\")]),s._v(\" \"),r(\"p\",[r(\"img\",{attrs:{src:e(691),alt:\"image-20190909112349183\"}})]),s._v(\" \"),r(\"ul\",[r(\"li\",[s._v(\"redis-benchmark: redis 性能检测工具\")]),s._v(\" \"),r(\"li\",[s._v(\"redis-check-aof： AOF文件修复工具\")]),s._v(\" \"),r(\"li\",[s._v(\"redis-check-rdb： RDB文件修复工具\")]),s._v(\" \"),r(\"li\",[s._v(\"redis-cli：  客户端命令行\")]),s._v(\" \"),r(\"li\",[s._v(\"redis.conf：  redis配置文件\")]),s._v(\" \"),r(\"li\",[s._v(\"redis-sentinel： redis集群\")]),s._v(\" \"),r(\"li\",[s._v(\"redis-server： redis 服务进程\")])]),s._v(\" \"),r(\"h2\",{attrs:{id:\"_3-启动redis\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-启动redis\"}},[s._v(\"#\")]),s._v(\" 3. 启动redis\")]),s._v(\" \"),r(\"h3\",{attrs:{id:\"_3-1-前端模式启动\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-1-前端模式启动\"}},[s._v(\"#\")]),s._v(\" 3.1 前端模式启动\")]),s._v(\" \"),r(\"p\",[s._v(\"直接运行redis-server将以前端模式启动\")]),s._v(\" \"),r(\"p\",[r(\"strong\",[s._v(\"缺点\")]),s._v(\"：ssh命令窗口关闭则redis-server程序结束，\"),r(\"strong\",[s._v(\"不推荐\")])]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"./redis-server\\n\")])])]),r(\"p\",[s._v(\"如图\")]),s._v(\" \"),r(\"p\",[r(\"img\",{attrs:{src:e(692),alt:\"image-20190909112943727\"}})]),s._v(\" \"),r(\"h3\",{attrs:{id:\"_3-2-后端模式启动\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-2-后端模式启动\"}},[s._v(\"#\")]),s._v(\" 3.2 后端模式启动\")]),s._v(\" \"),r(\"p\",[s._v(\"修改redis.conf 配置文件。daemonize yes 以后端模式启动\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"vim /usr/local/redis/bin/redis.conf\\n\")])])]),r(\"p\",[r(\"img\",{attrs:{src:e(693),alt:\"image-20190909113153794\"}})]),s._v(\" \"),r(\"p\",[s._v(\"执行如下命令\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"# 相对路径情况执行\\n./redis-server redis.conf\\n\\n# 全路径执行\\n/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf\\n\")])])]),r(\"p\",[r(\"img\",{attrs:{src:e(694),alt:\"image-20190909114017734\"}})]),s._v(\" \"),r(\"h2\",{attrs:{id:\"_4-连接redis\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-连接redis\"}},[s._v(\"#\")]),s._v(\" 4. 连接redis\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"/usr/local/redis/bin/redis-cli\\n\")])])]),r(\"h2\",{attrs:{id:\"_5-关闭redis\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-关闭redis\"}},[s._v(\"#\")]),s._v(\" 5.关闭redis\")]),s._v(\" \"),r(\"p\",[s._v(\"强行终止redis进程可能会导致redis持久化数据丢失。正确停止Redis的方式应该是向Redis发送SHUTDOWN命令，命令为：\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"cd /usr/local/redis\\n./bin/redis-cli shutdown\\n\")])])]),r(\"h3\",{attrs:{id:\"_5-1-强行终止redis-不推荐\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-1-强行终止redis-不推荐\"}},[s._v(\"#\")]),s._v(\" 5.1 强行终止redis(不推荐)\")]),s._v(\" \"),r(\"p\",[s._v(\"会造成数据丢失\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"pkill redis-server\\n\")])])]),r(\"h2\",{attrs:{id:\"_6-开机自启动\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-开机自启动\"}},[s._v(\"#\")]),s._v(\" 6. 开机自启动\")]),s._v(\" \"),r(\"p\",[s._v(\"在\"),r(\"code\",[s._v(\"/etc/rc.local\")]),s._v(\"编辑\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"vim /etc/rc.local\\n\")])])]),r(\"p\",[s._v(\"添加\")]),s._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[s._v(\"# redis 开机自启动\\n/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis-conf\\n\")])])])])}),[],!1,null,null,null);a.default=t.exports},690:function(s,a,e){s.exports=e.p+\"assets/img/image-20191203115107725.48009c6f.png\"},691:function(s,a,e){s.exports=e.p+\"assets/img/image-20190909112349183.c0708357.png\"},692:function(s,a,e){s.exports=e.p+\"assets/img/image-20190909112943727.5f369b28.png\"},693:function(s,a,e){s.exports=e.p+\"assets/img/image-20190909113153794.744d9037.png\"},694:function(s,a,e){s.exports=e.p+\"assets/img/image-20190909114017734.2d0d0043.png\"}}]);","extractedComments":[]}