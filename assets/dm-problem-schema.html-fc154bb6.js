import{_ as a,W as s,X as n,a0 as e}from"./framework-0cf5f349.js";const i={},t=e(`<h1 id="达梦数据库-写sql如何才能不带上模式名" tabindex="-1"><a class="header-anchor" href="#达梦数据库-写sql如何才能不带上模式名" aria-hidden="true">#</a> 达梦数据库-写SQL如何才能不带上模式名？</h1><h2 id="_1-问题背景" tabindex="-1"><a class="header-anchor" href="#_1-问题背景" aria-hidden="true">#</a> 1. 问题背景</h2><p>在达梦数据库中，SQL 查询时，需要加上模式名（数据库名）才能访问</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629143738277.png" alt="image-20210629143738277" tabindex="0" loading="lazy"><figcaption>image-20210629143738277</figcaption></figure><h3 id="_2-问题原因" tabindex="-1"><a class="header-anchor" href="#_2-问题原因" aria-hidden="true">#</a> 2. 问题原因</h3><p>其实这是把Mysql或者SQLSERVER的思维代入DM数据库造成的，Mysql的体系架构是单实例多库的，一个用户可以访问多个数据库，然后指定当前数据库写SQL的时候就不用带上数据库名了。</p><p><strong>达梦的体系架构是单库多实例的，也就是没有多个数据库的概念了，从Mysql或者SQLSERVER转到达梦，就需要建多个用户+表空间来对应Mysql的多个数据库。</strong></p><h3 id="_3-1-直接原因" tabindex="-1"><a class="header-anchor" href="#_3-1-直接原因" aria-hidden="true">#</a> 3.1 直接原因</h3><ul><li><p>自己是通过 sysdba 登录，执行 select * from tab1 时，查询的其实是 select * from sysdba.tab1;</p></li><li><p>如果你要找 new_schema.tab1 的话，那你要执行的sql 其实是 select * from new_schema.tab1;</p></li></ul><h2 id="_3-解决方式" tabindex="-1"><a class="header-anchor" href="#_3-解决方式" aria-hidden="true">#</a> 3. 解决方式</h2><p>例如MYSQL中有TESTDB1,TESTDB2两个库，都用root用户来访问</p><h3 id="_3-1-步骤1-新建表空间" tabindex="-1"><a class="header-anchor" href="#_3-1-步骤1-新建表空间" aria-hidden="true">#</a> 3.1 步骤1：新建表空间</h3><p>在达梦中第一步就创建两个表空间：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLESPACE</span> TESTDB1 DATAFILE <span class="token string">&#39;TESTDB1.DBF&#39;</span> SIZE <span class="token number">128</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLESPACE</span> TESTDB2 DATAFILE <span class="token string">&#39;TESTDB2.DBF&#39;</span> SIZE <span class="token number">128</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-步骤2-创建用户授权" tabindex="-1"><a class="header-anchor" href="#_3-2-步骤2-创建用户授权" aria-hidden="true">#</a> 3.2 步骤2：创建用户授权</h3><p>第二步创建两个用户，授予对应的权限：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">--以下SQL用SYSDBA用户登录执行</span>
 
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> TESTDB1 IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;123456789&quot;</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">TABLESPACE</span> TESTDB1<span class="token punctuation">;</span>
 
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> TESTDB2 IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;123456789&quot;</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">TABLESPACE</span> TESTDB2<span class="token punctuation">;</span>
 
<span class="token keyword">GRANT</span> RESOURCE <span class="token keyword">TO</span> TESTDB1<span class="token punctuation">;</span>
 
<span class="token keyword">GRANT</span> RESOURCE <span class="token keyword">TO</span> TESTDB2<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629145138099.png" alt="image-20210629145138099" tabindex="0" loading="lazy"><figcaption>image-20210629145138099</figcaption></figure><h3 id="_3-3-步骤3-迁移工具迁移的时候用testdb1用户来迁移" tabindex="-1"><a class="header-anchor" href="#_3-3-步骤3-迁移工具迁移的时候用testdb1用户来迁移" aria-hidden="true">#</a> 3.3 步骤3：迁移工具迁移的时候用TESTDB1用户来迁移</h3><p>迁移Mysql TESTDB1数据库里面的表，数据库迁移工具就使用TESTDB1用户来迁移；迁移Mysql TESTDB2数据库里面的表，数据库迁移工具就使用TESTDB2用户来迁移</p><h3 id="_3-4-步骤4-访问testdb1用户-模式-下的表-就使用testdb1用户登录" tabindex="-1"><a class="header-anchor" href="#_3-4-步骤4-访问testdb1用户-模式-下的表-就使用testdb1用户登录" aria-hidden="true">#</a> 3.4 步骤4：访问TESTDB1用户（模式）下的表，就使用TESTDB1用户登录</h3><p>访问TESTDB1用户（模式）下的表，就使用TESTDB1用户登录来访问，就不需要加模式名TESTDB1</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210629145353834.png" alt="image-20210629145353834" tabindex="0" loading="lazy"><figcaption>image-20210629145353834</figcaption></figure>`,23),l=[t];function d(r,o){return s(),n("div",null,l)}const p=a(i,[["render",d],["__file","dm-problem-schema.html.vue"]]);export{p as default};
