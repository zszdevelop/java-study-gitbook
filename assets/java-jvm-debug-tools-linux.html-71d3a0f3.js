import{_ as t,W as i,X as l,Y as n,Z as s,$ as e,a0 as p,D as c}from"./framework-0cf5f349.js";const o={},r=p(`<h1 id="调试排错-java-问题排查之linux命令" tabindex="-1"><a class="header-anchor" href="#调试排错-java-问题排查之linux命令" aria-hidden="true">#</a> 调试排错 - Java 问题排查之Linux命令</h1><blockquote><p>Java 在线问题排查主要分两篇：本文是第一篇，通过linux常用命令排查。</p></blockquote><h2 id="_1-文本操作" tabindex="-1"><a class="header-anchor" href="#_1-文本操作" aria-hidden="true">#</a> 1. 文本操作</h2><h3 id="_1-1-文本查找-grep" tabindex="-1"><a class="header-anchor" href="#_1-1-文本查找-grep" aria-hidden="true">#</a> 1.1 文本查找 - grep</h3><p>grep常用命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 基本使用</span>
<span class="token function">grep</span> yoursearchkeyword f.txt     <span class="token comment">#文件查找</span>
<span class="token function">grep</span> <span class="token string">&#39;KeyWord otherKeyWord&#39;</span> f.txt cpf.txt <span class="token comment">#多文件查找, 含空格加引号</span>
<span class="token function">grep</span> <span class="token string">&#39;KeyWord&#39;</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token comment">#目录下查找所有符合关键字的文件</span>
<span class="token function">grep</span> <span class="token string">&#39;keyword&#39;</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-i</span> <span class="token comment"># -i 忽略大小写</span>
<span class="token function">grep</span> <span class="token string">&#39;KeyWord&#39;</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">--include</span> *.<span class="token punctuation">{</span>vm,java<span class="token punctuation">}</span> <span class="token comment">#指定文件后缀</span>
<span class="token function">grep</span> <span class="token string">&#39;KeyWord&#39;</span> /home/admin <span class="token parameter variable">-r</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">--exclude</span> *.<span class="token punctuation">{</span>vm,java<span class="token punctuation">}</span> <span class="token comment">#反匹配</span>

<span class="token comment"># cat + grep</span>
<span class="token function">cat</span> f.txt <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> keyword <span class="token comment"># 查找所有keyword且不分大小写  </span>
<span class="token function">cat</span> f.txt <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-c</span> <span class="token string">&#39;KeyWord&#39;</span> <span class="token comment"># 统计Keyword次数</span>

<span class="token comment"># seq + grep</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">5</span> <span class="token parameter variable">-A</span> <span class="token number">3</span>    <span class="token comment">#上匹配</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">5</span> <span class="token parameter variable">-B</span> <span class="token number">3</span>    <span class="token comment">#下匹配</span>
<span class="token function">seq</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">5</span> <span class="token parameter variable">-C</span> <span class="token number">3</span>    <span class="token comment">#上下匹配，平时用这个就妥了</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Grep的参数：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">--color</span><span class="token operator">=</span>auto：显示颜色<span class="token punctuation">;</span>
-i, --ignore-case：忽略字符大小写<span class="token punctuation">;</span>
-o, --only-matching：只显示匹配到的部分<span class="token punctuation">;</span>
-n, --line-number：显示行号<span class="token punctuation">;</span>
-v, --invert-match：反向显示,显示未匹配到的行<span class="token punctuation">;</span>
-E, --extended-regexp：支持使用扩展的正则表达式<span class="token punctuation">;</span>
-q, --quiet, --silent：静默模式,即不输出任何信息<span class="token punctuation">;</span>
-w, --word-regexp：整行匹配整个单词<span class="token punctuation">;</span>
-c, --count：统计匹配到的行数<span class="token punctuation">;</span> print a count of matching lines<span class="token punctuation">;</span>

-B, --before-context<span class="token operator">=</span>NUM：print NUM lines of leading context   后<span class="token comment">#行 </span>
-A, --after-context<span class="token operator">=</span>NUM：print NUM lines of trailing context   前<span class="token comment">#行 </span>
-C, <span class="token parameter variable">--context</span><span class="token operator">=</span>NUM：print NUM lines of output context           前后各<span class="token comment">#行 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-文本分析-awk" tabindex="-1"><a class="header-anchor" href="#_1-2-文本分析-awk" aria-hidden="true">#</a> 1.2 文本分析 - awk</h3><p>awk基本命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 基本使用</span>
<span class="token function">awk</span> <span class="token string">&#39;{print $4,$6}&#39;</span> f.txt
<span class="token function">awk</span> <span class="token string">&#39;{print NR,$0}&#39;</span> f.txt cpf.txt    
<span class="token function">awk</span> <span class="token string">&#39;{print FNR,$0}&#39;</span> f.txt cpf.txt
<span class="token function">awk</span> <span class="token string">&#39;{print FNR,FILENAME,$0}&#39;</span> f.txt cpf.txt
<span class="token function">awk</span> <span class="token string">&#39;{print FILENAME,&quot;NR=&quot;NR,&quot;FNR=&quot;FNR,&quot;$&quot;NF&quot;=&quot;$NF}&#39;</span> f.txt cpf.txt
<span class="token builtin class-name">echo</span> <span class="token number">1</span>:2:3:4 <span class="token operator">|</span> <span class="token function">awk</span> -F: <span class="token string">&#39;{print $1,$2,$3,$4}&#39;</span>

<span class="token comment"># 匹配</span>
<span class="token function">awk</span> <span class="token string">&#39;/ldb/ {print}&#39;</span> f.txt   <span class="token comment">#匹配ldb</span>
<span class="token function">awk</span> <span class="token string">&#39;!/ldb/ {print}&#39;</span> f.txt  <span class="token comment">#不匹配ldb</span>
<span class="token function">awk</span> <span class="token string">&#39;/ldb/ &amp;&amp; /LISTEN/ {print}&#39;</span> f.txt   <span class="token comment">#匹配ldb和LISTEN</span>
<span class="token function">awk</span> <span class="token string">&#39;$5 ~ /ldb/ {print}&#39;</span> f.txt <span class="token comment">#第五列匹配ldb</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>内建变量</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable"><span class="token variable">\`</span>NR<span class="token variable">\`</span></span><span class="token builtin class-name">:</span> NR表示从awk开始执行后，按照记录分隔符读取的数据次数，默认的记录分隔符为换行符，因此默认的就是读取的数据行数，NR可以理解为Number of Record的缩写。

<span class="token variable"><span class="token variable">\`</span>FNR<span class="token variable">\`</span></span><span class="token builtin class-name">:</span> 在awk处理多个输入文件的时候，在处理完第一个文件后，NR并不会从1开始，而是继续累加，因此就出现了FNR，每当处理一个新文件的时候，FNR就从1开始计数，FNR可以理解为File Number of Record。

<span class="token variable"><span class="token variable">\`</span>NF<span class="token variable">\`</span></span><span class="token builtin class-name">:</span> NF表示目前的记录被分割的字段的数目，NF可以理解为Number of Field。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),d={href:"https://www.runoob.com/linux/linux-comm-awk.html",target:"_blank",rel:"noopener noreferrer"},u=p(`<h3 id="_1-3-文本处理-sed" tabindex="-1"><a class="header-anchor" href="#_1-3-文本处理-sed" aria-hidden="true">#</a> 1.3 文本处理 - sed</h3><p>sed常用：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 文本打印</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;3p&#39;</span> xxx.log <span class="token comment">#只打印第三行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;$p&#39;</span> xxx.log <span class="token comment">#只打印最后一行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;3,9p&#39;</span> xxx.log <span class="token comment">#只查看文件的第3行到第9行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;3,9p&#39;</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;=&#39;</span> xxx.log <span class="token comment">#打印3-9行，并显示行号</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/root/p&#39;</span> xxx.log <span class="token comment">#显示包含root的行</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/hhh/,/omc/p&#39;</span> xxx.log <span class="token comment"># 显示包含&quot;hhh&quot;的行到包含&quot;omc&quot;的行之间的行</span>

<span class="token comment"># 文本替换</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/root/world/g&#39;</span> xxx.log <span class="token comment"># 用world 替换xxx.log文件中的root; s==search  查找并替换, g==global  全部替换, -i: implace</span>

<span class="token comment"># 文本插入</span>
<span class="token function">sed</span> <span class="token string">&#39;1,4i hahaha&#39;</span> xxx.log <span class="token comment"># 在文件第一行和第四行的每行下面添加hahaha</span>
<span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;1i happy&#39;</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;$a new year&#39;</span> xxx.log  <span class="token comment">#【界面显示】在文件第一行添加happy,文件结尾添加new year</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;1i happy&#39;</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;$a new year&#39;</span> xxx.log <span class="token comment">#【真实写入文件】在文件第一行添加happy,文件结尾添加new year</span>

<span class="token comment"># 文本删除</span>
<span class="token function">sed</span>  <span class="token string">&#39;3,9d&#39;</span> xxx.log <span class="token comment"># 删除第3到第9行,只是不显示而已</span>
<span class="token function">sed</span> <span class="token string">&#39;/hhh/,/omc/d&#39;</span> xxx.log <span class="token comment"># 删除包含&quot;hhh&quot;的行到包含&quot;omc&quot;的行之间的行</span>
<span class="token function">sed</span> <span class="token string">&#39;/omc/,10d&#39;</span> xxx.log <span class="token comment"># 删除包含&quot;omc&quot;的行到第十行的内容</span>

<span class="token comment"># 与find结合</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">&quot;*.txt&quot;</span> <span class="token operator">|</span><span class="token function">xargs</span>   <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/hhhh/\\hHHh/g&#39;</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">&quot;*.txt&quot;</span> <span class="token operator">|</span><span class="token function">xargs</span>   <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s#hhhh#hHHh#g&#39;</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">&quot;*.txt&quot;</span> <span class="token parameter variable">-exec</span> <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/hhhh/\\hHHh/g&#39;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\\</span><span class="token punctuation">;</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span>  <span class="token string">&quot;*.txt&quot;</span> <span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">cat</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),m={href:"https://www.runoob.com/linux/linux-comm-sed.html",target:"_blank",rel:"noopener noreferrer"},b={href:"https://www.cnblogs.com/ftl1012/p/9250171.html",target:"_blank",rel:"noopener noreferrer"},v=p(`<h2 id="_2-文件操作" tabindex="-1"><a class="header-anchor" href="#_2-文件操作" aria-hidden="true">#</a> 2. 文件操作</h2><h3 id="_2-1-文件监听-tail" tabindex="-1"><a class="header-anchor" href="#_2-1-文件监听-tail" aria-hidden="true">#</a> 2.1 文件监听 - tail</h3><p>最常用的<code>tail -f filename</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 基本使用</span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> xxx.log <span class="token comment"># 循环监听文件</span>
<span class="token function">tail</span> <span class="token parameter variable">-300f</span> xxx.log <span class="token comment">#倒数300行并追踪文件</span>
<span class="token function">tail</span> +20 xxx.log <span class="token comment">#从第 20 行至文件末尾显示文件内容</span>

<span class="token comment"># tailf使用</span>
tailf xxx.log <span class="token comment">#等同于tail -f -n 10 打印最后10行，然后追踪文件</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tail -f 与tail F 与tailf三者区别</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable"><span class="token variable">\`</span><span class="token function">tail</span>  <span class="token parameter variable">-f</span> <span class="token variable">\`</span></span>  等于--follow<span class="token operator">=</span>descriptor，根据文件描述进行追踪，当文件改名或删除后，停止追踪。

<span class="token variable"><span class="token variable">\`</span><span class="token function">tail</span> <span class="token parameter variable">-F</span><span class="token variable">\`</span></span> 等于 <span class="token parameter variable">--follow</span><span class="token operator">=</span>name <span class="token operator">==</span>retry，根据文件名字进行追踪，当文件改名或删除后，保持重试，当有新的文件和他同名时，继续追踪

<span class="token variable"><span class="token variable">\`</span>tailf<span class="token variable">\`</span></span> 等于tail <span class="token parameter variable">-f</span> <span class="token parameter variable">-n</span> <span class="token number">10</span>（tail -f或-F默认也是打印最后10行，然后追踪文件），与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件，所以tailf特别适合那些便携机上跟踪日志文件，因为它减少了磁盘访问，可以省电。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tail的参数</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token parameter variable">-f</span> 循环读取
<span class="token parameter variable">-q</span> 不显示处理信息
<span class="token parameter variable">-v</span> 显示详细的处理信息
-c<span class="token operator">&lt;</span>数目<span class="token operator">&gt;</span> 显示的字节数
-n<span class="token operator">&lt;</span>行数<span class="token operator">&gt;</span> 显示文件的尾部 n 行内容
<span class="token parameter variable">--pid</span><span class="token operator">=</span>PID 与-f合用,表示在进程ID,PID死掉之后结束
-q, --quiet, <span class="token parameter variable">--silent</span> 从不输出给出文件名的首部
-s, --sleep-interval<span class="token operator">=</span>S 与-f合用,表示在每次反复的间隔休眠S秒
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-文件查找-find" tabindex="-1"><a class="header-anchor" href="#_2-2-文件查找-find" aria-hidden="true">#</a> 2.2 文件查找 - find</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token parameter variable">-u</span> admin <span class="token function">find</span> /home/admin /tmp /usr <span class="token parameter variable">-name</span> <span class="token punctuation">\\</span>*.log<span class="token punctuation">(</span>多个目录去找<span class="token punctuation">)</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-iname</span> <span class="token punctuation">\\</span>*.txt<span class="token punctuation">(</span>大小写都匹配<span class="token punctuation">)</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-type</span> d<span class="token punctuation">(</span>当前目录下的所有子目录<span class="token punctuation">)</span>
<span class="token function">find</span> /usr <span class="token parameter variable">-type</span> l<span class="token punctuation">(</span>当前目录下所有的符号链接<span class="token punctuation">)</span>
<span class="token function">find</span> /usr <span class="token parameter variable">-type</span> l <span class="token parameter variable">-name</span> <span class="token string">&quot;z*&quot;</span> -ls<span class="token punctuation">(</span>符号链接的详细信息 eg:inode,目录<span class="token punctuation">)</span>
<span class="token function">find</span> /home/admin <span class="token parameter variable">-size</span> +250000k<span class="token punctuation">(</span>超过250000k的文件，当然+改成-就是小于了<span class="token punctuation">)</span>
<span class="token function">find</span> /home/admin f <span class="token parameter variable">-perm</span> <span class="token number">777</span> <span class="token parameter variable">-exec</span> <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\\</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>按照权限查询文件<span class="token punctuation">)</span>
<span class="token function">find</span> /home/admin <span class="token parameter variable">-atime</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>天内访问过的文件
<span class="token function">find</span> /home/admin <span class="token parameter variable">-ctime</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>天内状态改变过的文件    
<span class="token function">find</span> /home/admin <span class="token parameter variable">-mtime</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>天内修改过的文件
<span class="token function">find</span> /home/admin <span class="token parameter variable">-amin</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>分钟内访问过的文件
<span class="token function">find</span> /home/admin <span class="token parameter variable">-cmin</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>分钟内状态改变过的文件    
<span class="token function">find</span> /home/admin <span class="token parameter variable">-mmin</span> <span class="token parameter variable">-1</span>  <span class="token number">1</span>分钟内修改过的文件
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-pgm" tabindex="-1"><a class="header-anchor" href="#_2-3-pgm" aria-hidden="true">#</a> 2.3 pgm</h3><p>批量查询vm-shopbase满足条件的日志</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pgm <span class="token parameter variable">-A</span> <span class="token parameter variable">-f</span> vm-shopbase <span class="token string">&#39;cat /home/admin/shopbase/logs/shopbase.log.2017-01-17|grep 2069861630&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-查看网络和进程" tabindex="-1"><a class="header-anchor" href="#_3-查看网络和进程" aria-hidden="true">#</a> 3. 查看网络和进程</h2><h3 id="_3-1-查看所有网络接口的属性" tabindex="-1"><a class="header-anchor" href="#_3-1-查看所有网络接口的属性" aria-hidden="true">#</a> 3.1 查看所有网络接口的属性</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># ifconfig</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.31</span>.165.194  netmask <span class="token number">255.255</span>.240.0  broadcast <span class="token number">172.31</span>.175.255
        ether 00:16:3e:08:c1:ea  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">21213152</span>  bytes <span class="token number">2812084823</span> <span class="token punctuation">(</span><span class="token number">2.6</span> GiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">25264438</span>  bytes <span class="token number">46566724676</span> <span class="token punctuation">(</span><span class="token number">43.3</span> GiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">502</span>  bytes <span class="token number">86350</span> <span class="token punctuation">(</span><span class="token number">84.3</span> KiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">502</span>  bytes <span class="token number">86350</span> <span class="token punctuation">(</span><span class="token number">84.3</span> KiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-查看防火墙设置" tabindex="-1"><a class="header-anchor" href="#_3-2-查看防火墙设置" aria-hidden="true">#</a> 3.2 查看防火墙设置</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># iptables -L</span>
Chain INPUT <span class="token punctuation">(</span>policy ACCEPT<span class="token punctuation">)</span>
target     prot opt <span class="token builtin class-name">source</span>               destination

Chain FORWARD <span class="token punctuation">(</span>policy ACCEPT<span class="token punctuation">)</span>
target     prot opt <span class="token builtin class-name">source</span>               destination

Chain OUTPUT <span class="token punctuation">(</span>policy ACCEPT<span class="token punctuation">)</span>
target     prot opt <span class="token builtin class-name">source</span>               destination
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-查看路由表" tabindex="-1"><a class="header-anchor" href="#_3-3-查看路由表" aria-hidden="true">#</a> 3.3 查看路由表</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># route -n</span>
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
<span class="token number">0.0</span>.0.0         <span class="token number">172.31</span>.175.253  <span class="token number">0.0</span>.0.0         UG    <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">169.254</span>.0.0     <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.0.0     U     <span class="token number">1002</span>   <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">172.31</span>.160.0    <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.240.0   U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-netstat" tabindex="-1"><a class="header-anchor" href="#_3-4-netstat" aria-hidden="true">#</a> 3.4 netstat</h3><p>查看所有监听端口</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># netstat -lntp</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name  
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:443             <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:9999            <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1249</span>/java         
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:22              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1547</span>/sshd         
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN      <span class="token number">1894</span>/mysqld       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看所有已经建立的连接</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># netstat -antp</span>
Active Internet connections <span class="token punctuation">(</span>servers and established<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:443             <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:9999            <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1249</span>/java
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">970</span>/nginx: master p
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:22              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">1547</span>/sshd
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">172.31</span>.165.194:53874    <span class="token number">100.100</span>.30.25:80        ESTABLISHED <span class="token number">18041</span>/AliYunDun
tcp        <span class="token number">0</span>     <span class="token number">64</span> <span class="token number">172.31</span>.165.194:22       xxx.194.1.200:2649      ESTABLISHED <span class="token number">32516</span>/sshd: root@pt
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN      <span class="token number">1894</span>/m

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看当前连接</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># netstat -nat|awk  &#39;{print $6}&#39;|sort|uniq -c|sort -rn</span>
      <span class="token number">5</span> LISTEN
      <span class="token number">2</span> ESTABLISHED
      <span class="token number">1</span> Foreign
      <span class="token number">1</span> established<span class="token punctuation">)</span>   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看网络统计信息进程</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># netstat -s</span>
Ip:
    <span class="token number">21017132</span> total packets received
    <span class="token number">0</span> forwarded
    <span class="token number">0</span> incoming packets discarded
    <span class="token number">21017131</span> incoming packets delivered
    <span class="token number">25114367</span> requests sent out
    <span class="token number">324</span> dropped because of missing route
Icmp:
    <span class="token number">18088</span> ICMP messages received
    <span class="token number">692</span> input ICMP message failed.
    ICMP input histogram:
        destination unreachable: <span class="token number">4241</span>
        <span class="token function">timeout</span> <span class="token keyword">in</span> transit: <span class="token number">19</span>
        <span class="token builtin class-name">echo</span> requests: <span class="token number">13791</span>
        <span class="token builtin class-name">echo</span> replies: <span class="token number">4</span>
        timestamp request: <span class="token number">33</span>
    <span class="token number">13825</span> ICMP messages sent
    <span class="token number">0</span> ICMP messages failed
    ICMP output histogram:
        destination unreachable: <span class="token number">1</span>
        <span class="token builtin class-name">echo</span> replies: <span class="token number">13791</span>
        timestamp replies: <span class="token number">33</span>
IcmpMsg:
        InType0: <span class="token number">4</span>
        InType3: <span class="token number">4241</span>
        InType8: <span class="token number">13791</span>
        InType11: <span class="token number">19</span>
        InType13: <span class="token number">33</span>
        OutType0: <span class="token number">13791</span>
        OutType3: <span class="token number">1</span>
        OutType14: <span class="token number">33</span>
Tcp:
    <span class="token number">12210</span> active connections openings
    <span class="token number">208820</span> passive connection openings
    <span class="token number">54198</span> failed connection attempts
    <span class="token number">9805</span> connection resets received
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,29),k={href:"https://www.cnblogs.com/ftl1012/p/netstat.html",target:"_blank",rel:"noopener noreferrer"},h=p(`<h3 id="_3-5-查看所有进程" tabindex="-1"><a class="header-anchor" href="#_3-5-查看所有进程" aria-hidden="true">#</a> 3.5 查看所有进程</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep java</span>
root      <span class="token number">1249</span>     <span class="token number">1</span>  <span class="token number">0</span> Nov04 ?        00:58:05 <span class="token function">java</span> <span class="token parameter variable">-jar</span> /opt/tech_doc/bin/tech_arch-0.0.1-RELEASE.jar <span class="token parameter variable">--server.port</span><span class="token operator">=</span><span class="token number">9999</span>
root     <span class="token number">32718</span> <span class="token number">32518</span>  <span class="token number">0</span> 08:36 pts/0    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto <span class="token function">java</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-top" tabindex="-1"><a class="header-anchor" href="#_3-6-top" aria-hidden="true">#</a> 3.6 top</h3><p>top除了看一些基本信息之外，剩下的就是配合来查询vm的各种问题了</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># top -H -p pid</span>
<span class="token function">top</span> - 08:37:51 up <span class="token number">45</span> days, <span class="token number">18</span>:45,  <span class="token number">1</span> user,  load average: <span class="token number">0.01</span>, <span class="token number">0.03</span>, <span class="token number">0.05</span>
Threads:  <span class="token number">28</span> total,   <span class="token number">0</span> running,  <span class="token number">28</span> sleeping,   <span class="token number">0</span> stopped,   <span class="token number">0</span> zombie
%Cpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:  <span class="token number">0.7</span> us,  <span class="token number">0.7</span> sy,  <span class="token number">0.0</span> ni, <span class="token number">98.6</span> id,  <span class="token number">0.0</span> wa,  <span class="token number">0.0</span> hi,  <span class="token number">0.0</span> si,  <span class="token number">0.0</span> st
KiB Mem <span class="token builtin class-name">:</span>  <span class="token number">1882088</span> total,    <span class="token number">74608</span> free,   <span class="token number">202228</span> used,  <span class="token number">1605252</span> buff/cache
KiB Swap:  <span class="token number">2097148</span> total,  <span class="token number">1835392</span> free,   <span class="token number">261756</span> used.  <span class="token number">1502036</span> avail Mem

  PID <span class="token environment constant">USER</span>      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
 <span class="token number">1347</span> root      <span class="token number">20</span>   <span class="token number">0</span> <span class="token number">2553808</span> <span class="token number">113752</span>   <span class="token number">1024</span> S  <span class="token number">0.3</span>  <span class="token number">6.0</span>  <span class="token number">48</span>:46.74 VM Periodic Tas
 <span class="token number">1249</span> root      <span class="token number">20</span>   <span class="token number">0</span> <span class="token number">2553808</span> <span class="token number">113752</span>   <span class="token number">1024</span> S  <span class="token number">0.0</span>  <span class="token number">6.0</span>   <span class="token number">0</span>:00.00 <span class="token function">java</span>
 <span class="token number">1289</span> root      <span class="token number">20</span>   <span class="token number">0</span> <span class="token number">2553808</span> <span class="token number">113752</span>   <span class="token number">1024</span> S  <span class="token number">0.0</span>  <span class="token number">6.0</span>   <span class="token number">0</span>:03.74 <span class="token function">java</span>
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-查看磁盘和内存相关" tabindex="-1"><a class="header-anchor" href="#_4-查看磁盘和内存相关" aria-hidden="true">#</a> 4. 查看磁盘和内存相关</h2><h3 id="_4-1-查看内存使用-free-m" tabindex="-1"><a class="header-anchor" href="#_4-1-查看内存使用-free-m" aria-hidden="true">#</a> 4.1 查看内存使用 - free -m</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># free -m</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:           <span class="token number">1837</span>         <span class="token number">196</span>         <span class="token number">824</span>           <span class="token number">0</span>         <span class="token number">816</span>        <span class="token number">1469</span>
Swap:          <span class="token number">2047</span>         <span class="token number">255</span>        <span class="token number">1792</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-查看各分区使用情况" tabindex="-1"><a class="header-anchor" href="#_4-2-查看各分区使用情况" aria-hidden="true">#</a> 4.2 查看各分区使用情况</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># df -h</span>
Filesystem      Size  Used Avail Use% Mounted on
devtmpfs        909M     <span class="token number">0</span>  909M   <span class="token number">0</span>% /dev
tmpfs           919M     <span class="token number">0</span>  919M   <span class="token number">0</span>% /dev/shm
tmpfs           919M  452K  919M   <span class="token number">1</span>% /run
tmpfs           919M     <span class="token number">0</span>  919M   <span class="token number">0</span>% /sys/fs/cgroup
/dev/vda1        40G   15G   23G  <span class="token number">40</span>% /
tmpfs           184M     <span class="token number">0</span>  184M   <span class="token number">0</span>% /run/user/0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-查看指定目录的大小" tabindex="-1"><a class="header-anchor" href="#_4-3-查看指定目录的大小" aria-hidden="true">#</a> 4.3 查看指定目录的大小</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># du -sh</span>
803M
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-查看内存总量" tabindex="-1"><a class="header-anchor" href="#_4-4-查看内存总量" aria-hidden="true">#</a> 4.4 查看内存总量</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># grep MemTotal /proc/meminfo</span>
MemTotal:        <span class="token number">1882088</span> kB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-查看空闲内存量" tabindex="-1"><a class="header-anchor" href="#_4-5-查看空闲内存量" aria-hidden="true">#</a> 4.5 查看空闲内存量</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># grep MemFree /proc/meminfo</span>
MemFree:           <span class="token number">74120</span> kB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-6-查看系统负载磁盘和分区" tabindex="-1"><a class="header-anchor" href="#_4-6-查看系统负载磁盘和分区" aria-hidden="true">#</a> 4.6 查看系统负载磁盘和分区</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># grep MemFree /proc/meminfo</span>
MemFree:           <span class="token number">74120</span> kB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-查看系统负载磁盘和分区" tabindex="-1"><a class="header-anchor" href="#_4-7-查看系统负载磁盘和分区" aria-hidden="true">#</a> 4.7 查看系统负载磁盘和分区</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/loadavg</span>
<span class="token number">0.01</span> <span class="token number">0.04</span> <span class="token number">0.05</span> <span class="token number">2</span>/174 <span class="token number">32751</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-8-查看挂接的分区状态" tabindex="-1"><a class="header-anchor" href="#_4-8-查看挂接的分区状态" aria-hidden="true">#</a> 4.8 查看挂接的分区状态</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># mount | column -t</span>
sysfs       on  /sys                             <span class="token builtin class-name">type</span>  sysfs       <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
proc        on  /proc                            <span class="token builtin class-name">type</span>  proc        <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
devtmpfs    on  /dev                             <span class="token builtin class-name">type</span>  devtmpfs    <span class="token punctuation">(</span>rw,nosuid,size<span class="token operator">=</span>930732k,nr_inodes<span class="token operator">=</span><span class="token number">232683</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
securityfs  on  /sys/kernel/security             <span class="token builtin class-name">type</span>  securityfs  <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-9-查看所有分区" tabindex="-1"><a class="header-anchor" href="#_4-9-查看所有分区" aria-hidden="true">#</a> 4.9 查看所有分区</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># fdisk -l</span>

Disk /dev/vda: <span class="token number">42.9</span> GB, <span class="token number">42949672960</span> bytes, <span class="token number">83886080</span> sectors
Units <span class="token operator">=</span> sectors of <span class="token number">1</span> * <span class="token number">512</span> <span class="token operator">=</span> <span class="token number">512</span> bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytes
Disk label type: dos
Disk identifier: 0x0008d73a

   Device Boot      Start         End      Blocks   Id  System
/dev/vda1   *        <span class="token number">2048</span>    <span class="token number">83884031</span>    <span class="token number">41940992</span>   <span class="token number">83</span>  Linux
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-10-查看所有交换分区" tabindex="-1"><a class="header-anchor" href="#_4-10-查看所有交换分区" aria-hidden="true">#</a> 4.10 查看所有交换分区</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># swapon -s</span>
Filename                                Type            Size    Used    Priority
/etc/swap                               <span class="token function">file</span>    <span class="token number">2097148</span> <span class="token number">261756</span>  <span class="token parameter variable">-2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-11-查看硬盘大小" tabindex="-1"><a class="header-anchor" href="#_4-11-查看硬盘大小" aria-hidden="true">#</a> 4.11 查看硬盘大小</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># fdisk -l |grep Disk</span>
Disk /dev/vda: <span class="token number">42.9</span> GB, <span class="token number">42949672960</span> bytes, <span class="token number">83886080</span> sectors
Disk label type: dos
Disk identifier: 0x0008d73a
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-查看用户和组相关" tabindex="-1"><a class="header-anchor" href="#_5-查看用户和组相关" aria-hidden="true">#</a> 5. 查看用户和组相关</h2><h3 id="_5-1-查看活动用户" tabindex="-1"><a class="header-anchor" href="#_5-1-查看活动用户" aria-hidden="true">#</a> 5.1 查看活动用户</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># w</span>
 08:47:20 up <span class="token number">45</span> days, <span class="token number">18</span>:54,  <span class="token number">1</span> user,  load average: <span class="token number">0.01</span>, <span class="token number">0.03</span>, <span class="token number">0.05</span>
<span class="token environment constant">USER</span>     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    xxx.194.1.200    08:32    <span class="token number">0</span>.00s  <span class="token number">0</span>.32s  <span class="token number">0</span>.32s <span class="token parameter variable">-bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-查看指定用户信息" tabindex="-1"><a class="header-anchor" href="#_5-2-查看指定用户信息" aria-hidden="true">#</a> 5.2 查看指定用户信息</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-查看用户登录日志" tabindex="-1"><a class="header-anchor" href="#_5-3-查看用户登录日志" aria-hidden="true">#</a> 5.3 查看用户登录日志</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># last</span>
root     pts/0        xxx.194.1.200    Fri Dec <span class="token number">20</span> 08:32   still logged <span class="token keyword">in</span>
root     pts/0        xxx.73.164.60     Thu Dec <span class="token number">19</span> <span class="token number">21</span>:47 - 00:28  <span class="token punctuation">(</span>02:41<span class="token punctuation">)</span>
root     pts/0        xxx.106.236.255  Thu Dec <span class="token number">19</span> <span class="token number">16</span>:00 - <span class="token number">18</span>:24  <span class="token punctuation">(</span>02:23<span class="token punctuation">)</span>
root     pts/1        xxx.194.3.173    Tue Dec <span class="token number">17</span> <span class="token number">13</span>:35 - <span class="token number">17</span>:37  <span class="token punctuation">(</span>04:01<span class="token punctuation">)</span>
root     pts/0        xxx.194.3.173    Tue Dec <span class="token number">17</span> <span class="token number">13</span>:35 - <span class="token number">17</span>:37  <span class="token punctuation">(</span>04:02<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4-查看系统所有用户" tabindex="-1"><a class="header-anchor" href="#_5-4-查看系统所有用户" aria-hidden="true">#</a> 5.4 查看系统所有用户</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@pdai.tech ~<span class="token punctuation">]</span><span class="token comment"># cut -d: -f1 /etc/passwd</span>
root
bin
daemon
adm
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-5-查看系统所有组" tabindex="-1"><a class="header-anchor" href="#_5-5-查看系统所有组" aria-hidden="true">#</a> 5.5 查看系统所有组</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cut</span> -d: <span class="token parameter variable">-f1</span> /etc/group
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_6-查看服务-模块和包相关" tabindex="-1"><a class="header-anchor" href="#_6-查看服务-模块和包相关" aria-hidden="true">#</a> 6. 查看服务，模块和包相关</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 查看当前用户的计划任务服务</span>
<span class="token function">crontab</span> <span class="token parameter variable">-l</span> 

<span class="token comment"># 列出所有系统服务</span>
<span class="token function">chkconfig</span> –list 

<span class="token comment"># 列出所有启动的系统服务程序</span>
<span class="token function">chkconfig</span> –list <span class="token operator">|</span> <span class="token function">grep</span> on 

<span class="token comment"># 查看所有安装的软件包</span>
<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> 

<span class="token comment"># 列出加载的内核模块</span>
lsmod 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-查看系统-设备-环境信息" tabindex="-1"><a class="header-anchor" href="#_7-查看系统-设备-环境信息" aria-hidden="true">#</a> 7. 查看系统，设备，环境信息</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 常用</span>
<span class="token function">env</span> <span class="token comment"># 查看环境变量资源</span>
<span class="token function">uptime</span> <span class="token comment"># 查看系统运行时间、用户数、负载</span>
lsusb <span class="token parameter variable">-tv</span> <span class="token comment"># 列出所有USB设备的linux系统信息命令</span>
lspci <span class="token parameter variable">-tv</span> <span class="token comment"># 列出所有PCI设备</span>
<span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> /etc/issue <span class="token comment"># 查看操作系统版本，是数字1不是字母L</span>
<span class="token function">uname</span> <span class="token parameter variable">-a</span> <span class="token comment"># 查看内核/操作系统/CPU信息的linux系统信息命令</span>

<span class="token comment"># /proc/</span>
<span class="token function">cat</span> /proc/cpuinfo ：查看CPU相关参数的linux系统命令
<span class="token function">cat</span> /proc/partitions ：查看linux硬盘和分区信息的系统信息命令
<span class="token function">cat</span> /proc/meminfo ：查看linux系统内存信息的linux系统命令
<span class="token function">cat</span> /proc/version ：查看版本，类似uname <span class="token parameter variable">-r</span>
<span class="token function">cat</span> /proc/ioports ：查看设备io端口
<span class="token function">cat</span> /proc/interrupts ：查看中断
<span class="token function">cat</span> /proc/pci ：查看pci设备的信息
<span class="token function">cat</span> /proc/swaps ：查看所有swap分区的信息
<span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&quot;model name&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&quot;physical id&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-tsar" tabindex="-1"><a class="header-anchor" href="#_8-tsar" aria-hidden="true">#</a> 8. tsar</h2><p>tsar是淘宝开源的的采集工具。很好用, 将历史收集到的数据持久化在磁盘上，所以我们快速来查询历史的系统数据。当然实时的应用情况也是可以查询的啦。大部分机器上都有安装。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>tsar  <span class="token comment">##可以查看最近一天的各项指标</span>
tsar <span class="token parameter variable">--live</span> <span class="token comment">##可以查看实时指标，默认五秒一刷</span>
tsar <span class="token parameter variable">-d</span> <span class="token number">20161218</span> <span class="token comment">##指定查看某天的数据，貌似最多只能看四个月的数据</span>
tsar <span class="token parameter variable">--mem</span>
tsar <span class="token parameter variable">--load</span>
tsar <span class="token parameter variable">--cpu</span> <span class="token comment">##当然这个也可以和-d参数配合来查询某天的单个指标的情况 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,46),g={href:"https://www.jianshu.com/p/5562854ed901",target:"_blank",rel:"noopener noreferrer"},f=n("h2",{id:"参考文章",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#参考文章","aria-hidden":"true"},"#"),s(" 参考文章")],-1),x={href:"https://pdai.tech/md/java/jvm/java-jvm-debug-tools-linux.html",target:"_blank",rel:"noopener noreferrer"},_=n("strong",null,"调试排错 - Java 问题排查之Linux命令",-1);function y(w,N){const a=c("ExternalLinkIcon");return i(),l("div",null,[r,n("p",null,[s("更多请参考："),n("a",d,[s("Linux awk 命令"),e(a)])]),u,n("p",null,[s("更多请参考："),n("a",m,[s("Linux sed 命令"),e(a)]),s(" 或者 "),n("a",b,[s("Linux sed命令详解"),e(a)])]),v,n("p",null,[s("netstat 请参考这篇文章: "),n("a",k,[s("Linux netstat命令详解"),e(a)])]),h,n("p",null,[s("具体可以看这篇文章："),n("a",g,[s("linux 淘宝开源监控工具tsar"),e(a)])]),f,n("p",null,[n("a",x,[_,e(a)])])])}const T=t(o,[["render",y],["__file","java-jvm-debug-tools-linux.html.vue"]]);export{T as default};
