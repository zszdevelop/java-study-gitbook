import{_ as r,W as t,X as o,Y as e,Z as a,$ as s,a0 as i,D as l}from"./framework-0cf5f349.js";const d={},c={id:"删除-git中的错误提交的文件-md",tabindex:"-1"},p=e("a",{class:"header-anchor",href:"#删除-git中的错误提交的文件-md","aria-hidden":"true"},"#",-1),g={href:"http://xn--bcr377n.xn--git-x68d9umpj91jn4ci06cca4241dl8wa.md",target:"_blank",rel:"noopener noreferrer"},h=i('<h2 id="_1-背景" tabindex="-1"><a class="header-anchor" href="#_1-背景" aria-hidden="true">#</a> 1. 背景</h2><p>Git 操作时，经常“不小心”上传一些不必要的（大）文件，或者私密数据，等等。</p><p>当然可以从本地把这些文件删除，加入 <code>.gitignore</code>, 避免下次再上传。</p><p>然而，<strong>之前已经上传过的，还遗留在 git 历史中</strong></p><h2 id="_2-实例" tabindex="-1"><a class="header-anchor" href="#_2-实例" aria-hidden="true">#</a> 2. 实例</h2><p>如下是一个我误将vue 的第三方依赖node_modules 添加到git 导致.git文件过大</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201010094508032.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3-操作步骤" tabindex="-1"><a class="header-anchor" href="#_3-操作步骤" aria-hidden="true">#</a> 3. 操作步骤</h2>',8),u={href:"https://rtyley.github.io/bfg-repo-cleaner/",target:"_blank",rel:"noopener noreferrer"},m=e("code",null,"your-repo.git",-1),b=i(`<li><p>删除.git 中的文件或者文件夹</p><ul><li><p>删除文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> bfg-1.12.16.jar --delete-files test1.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>删除文件夹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> bfg-1.12.16.jar --delete-folders <span class="token string">&quot;{folderA,folderB,folderC}&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>执行如下 git 命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> reflog expire <span class="token parameter variable">--expire</span><span class="token operator">=</span>now <span class="token parameter variable">--all</span> <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> gc <span class="token parameter variable">--prune</span><span class="token operator">=</span>now <span class="token parameter variable">--aggressive</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此时查看.git 文件夹，就可以看到文件变小了</p></li>`,2),_=e("figure",null,[e("img",{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201010093714396.png",alt:"",tabindex:"0",loading:"lazy"}),e("figcaption")],-1),f=e("h2",{id:"参考文章",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#参考文章","aria-hidden":"true"},"#"),a(" 参考文章")],-1),v={href:"https://juejin.im/post/6844904045459537934",target:"_blank",rel:"noopener noreferrer"};function k(x,j){const n=l("ExternalLinkIcon");return t(),o("div",null,[e("h1",c,[p,a(),e("a",g,[a("删除.git中的错误提交的文件.md"),s(n)])]),h,e("ol",null,[e("li",null,[e("p",null,[e("a",u,[a("下载bfg.jar"),s(n)]),a(", 直接将其复制到 "),m,a(" 目录下")])]),b]),_,f,e("p",null,[e("a",v,[a("BFG Repo-Cleaner - 从 Git 历史中真正删除文件"),s(n)])])])}const y=r(d,[["render",k],["__file","git-y-delete-error-commit-file.html.vue"]]);export{y as default};
