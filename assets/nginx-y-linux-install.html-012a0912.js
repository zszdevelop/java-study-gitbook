import{_ as r,W as s,X as l,Y as e,Z as n,$ as a,a0 as d,D as t}from"./framework-0cf5f349.js";const c={},o=d(`<h1 id="linux安装nginx" tabindex="-1"><a class="header-anchor" href="#linux安装nginx" aria-hidden="true">#</a> Linux安装nginx</h1><h2 id="_1-安装步骤" tabindex="-1"><a class="header-anchor" href="#_1-安装步骤" aria-hidden="true">#</a> 1. 安装步骤</h2><h3 id="_1-1-安装依赖包" tabindex="-1"><a class="header-anchor" href="#_1-1-安装依赖包" aria-hidden="true">#</a> 1.1 安装依赖包</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//一键安装上面四个依赖
yum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-下载并解压安装包" tabindex="-1"><a class="header-anchor" href="#_1-2-下载并解压安装包" aria-hidden="true">#</a> 1.2 下载并解压安装包</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//下载tar包
wget http://nginx.org/download/nginx-1.16.1.tar.gz
tar -xvf nginx-1.16.1.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),g={href:"https://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"},u=d(`<h3 id="_1-3-安装nginx" tabindex="-1"><a class="header-anchor" href="#_1-3-安装nginx" aria-hidden="true">#</a> 1.3 安装nginx</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//进入nginx目录
cd nginx-1.16.1
//执行命令
./configure
//执行make命令
make
//执行make install命令
make install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装完成会在/usr/local目录下出现nginx</p><ul><li>注：如果需要支持http需要加如上</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./configure  --with-http_ssl_module
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-4-配置nginx-conf" tabindex="-1"><a class="header-anchor" href="#_1-4-配置nginx-conf" aria-hidden="true">#</a> 1.4 配置nginx.conf</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 打开配置文件
vi /usr/local/nginx/conf/nginx.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>按需修改配置</p><p>如默认端口为80，可以修改成想要的地址</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>server {
        listen       80;
        server_name  localhost;
        ...
        }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-启动nginx" tabindex="-1"><a class="header-anchor" href="#_1-5-启动nginx" aria-hidden="true">#</a> 1.5 启动nginx</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/usr/local/nginx/sbin/nginx -s reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看nginx进程是否启动</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ps -ef | grep nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-6-浏览器打开" tabindex="-1"><a class="header-anchor" href="#_1-6-浏览器打开" aria-hidden="true">#</a> 1.6 浏览器打开</h3><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190907221848439.png" alt="image-20190907221848439" tabindex="0" loading="lazy"><figcaption>image-20190907221848439</figcaption></figure><h2 id="_2-启动可能遇到的问题" tabindex="-1"><a class="header-anchor" href="#_2-启动可能遇到的问题" aria-hidden="true">#</a> 2. 启动可能遇到的问题</h2><h3 id="_2-1-logs-文件夹目录没有" tabindex="-1"><a class="header-anchor" href="#_2-1-logs-文件夹目录没有" aria-hidden="true">#</a> 2.1 logs 文件夹目录没有</h3><p>错误提示如下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> [alert] could not open error log file: open() &quot;/usr/local/nginx/logs/error.log&quot; failed (2: No such file or directory)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>解决方案：在提示的指定目录创建logs文件夹</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>mkdir logs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-2-nginx-pid-异常" tabindex="-1"><a class="header-anchor" href="#_2-2-nginx-pid-异常" aria-hidden="true">#</a> 2.2 nginx.pid 异常</h3><p>错误提示如下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> [error] 21478#0: open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>解决方案：先设置配置文件</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-3-启动无反应-error-log-疯狂打印-worker-process-22327-exited-on-signal" tabindex="-1"><a class="header-anchor" href="#_2-3-启动无反应-error-log-疯狂打印-worker-process-22327-exited-on-signal" aria-hidden="true">#</a> 2.3 启动无反应，error.log 疯狂打印 worker process 22327 exited on signal</h3><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210115112252704.png" alt="image-20210115112252704" tabindex="0" loading="lazy"><figcaption>image-20210115112252704</figcaption></figure><p>因为nginx对fastdfs进行了代理,我们启动fdfs 即可恢复</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/etc/init.d/fdfs_trackerd start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-nginx-命令" tabindex="-1"><a class="header-anchor" href="#_3-nginx-命令" aria-hidden="true">#</a> 3. nginx 命令</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./nginx 启动

./nginx -s stop 关闭

./nginx -s reload 重启
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-附录" tabindex="-1"><a class="header-anchor" href="#_4-附录" aria-hidden="true">#</a> 4. 附录</h2><h3 id="_4-1-rpm-版本-nginx-部署" tabindex="-1"><a class="header-anchor" href="#_4-1-rpm-版本-nginx-部署" aria-hidden="true">#</a> 4.1 rpm 版本 Nginx 部署</h3><ol><li><p>上传nginx对应版本的rpm</p></li><li><p>安装rpm</p><p>rpm -ivh nginx-1.16.1-1.el6.ngx.x86_64.rpm</p></li><li><p>启动nginx</p><p>service nginx start</p></li><li><p>创建前端存放文件夹</p><p>mkdir /usr/share/nginx/html/frontend</p></li><li><p>替换配置文件</p><p>替换覆盖nginx.conf 到/etc/nginx/目录下</p></li></ol><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章" aria-hidden="true">#</a> 参考文章</h2>`,37),x={href:"https://www.debugger.wiki/article/html/1575597633434520",target:"_blank",rel:"noopener noreferrer"};function h(v,m){const i=t("ExternalLinkIcon");return s(),l("div",null,[o,e("p",null,[n("wget 下载的tar包版本可以通过"),e("a",g,[n("nginx官网"),a(i)]),n("查看")]),u,e("p",null,[e("a",x,[n("nginx重启后，反向代理失败之问题排查记录"),a(i)])])])}const b=r(c,[["render",h],["__file","nginx-y-linux-install.html.vue"]]);export{b as default};
