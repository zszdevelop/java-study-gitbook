import{_ as s,W as r,X as n,Y as i,Z as e,$ as l,a0 as a,D as t}from"./framework-0cf5f349.js";const c={},o=a(`<h1 id="redis安装" tabindex="-1"><a class="header-anchor" href="#redis安装" aria-hidden="true">#</a> Redis安装</h1><h2 id="_1-具体安装步骤" tabindex="-1"><a class="header-anchor" href="#_1-具体安装步骤" aria-hidden="true">#</a> 1. 具体安装步骤</h2><h3 id="_1-1-使用wget命令下载" tabindex="-1"><a class="header-anchor" href="#_1-1-使用wget命令下载" aria-hidden="true">#</a> 1.1 使用wget命令下载</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wget http://download.redis.io/releases/redis-5.0.5.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,4),g={href:"http://download.redis.io/releases/",target:"_blank",rel:"noopener noreferrer"},u=a(`<h3 id="_1-2-解压源码" tabindex="-1"><a class="header-anchor" href="#_1-2-解压源码" aria-hidden="true">#</a> 1.2 解压源码</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>tar -zxvf redis-5.0.5.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-3-编译" tabindex="-1"><a class="header-anchor" href="#_1-3-编译" aria-hidden="true">#</a> 1.3 编译</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cd /usr/local/redis-5.0.5
make PREFIX=/usr/local/redis install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>编译后的redis在 <code>/usr/local/redis</code>目录下</p><h4 id="_1-3-1-如遇安装异常cc-command-not-found" tabindex="-1"><a class="header-anchor" href="#_1-3-1-如遇安装异常cc-command-not-found" aria-hidden="true">#</a> 1.3.1 如遇安装异常cc: command not found</h4><p>/bin/sh: cc: command not found</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20191203115107725.png" alt="image-20191203115107725" tabindex="0" loading="lazy"><figcaption>image-20191203115107725</figcaption></figure><p>**解决方案：**安装gcc命令</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install gcc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_1-3-2-make时报如下错误" tabindex="-1"><a class="header-anchor" href="#_1-3-2-make时报如下错误" aria-hidden="true">#</a> 1.3.2 make时报如下错误</h4><p>原因是jemalloc重载了Linux下的ANSI C的malloc和free函数。解决办法：make时添加参数。</p><h3 id="_1-4-redis的配置文件" tabindex="-1"><a class="header-anchor" href="#_1-4-redis的配置文件" aria-hidden="true">#</a> 1.4 redis的配置文件</h3><p>redis.conf是redis的配置文件，redis.conf在redis源码目录。 拷贝配置文件到安装目录下 进入源码目录，里面有一份配置文件 redis.conf，然后将其拷贝到安装路径下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cp redis.conf /usr/local/redis/bin/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-bin目录结构" tabindex="-1"><a class="header-anchor" href="#_2-bin目录结构" aria-hidden="true">#</a> 2. bin目录结构</h2><p>进入安装目录bin下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cd /usr/local/redis/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>目录结构</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909112349183.png" alt="image-20190909112349183" tabindex="0" loading="lazy"><figcaption>image-20190909112349183</figcaption></figure><ul><li>redis-benchmark: redis 性能检测工具</li><li>redis-check-aof： AOF文件修复工具</li><li>redis-check-rdb： RDB文件修复工具</li><li>redis-cli： 客户端命令行</li><li>redis.conf： redis配置文件</li><li>redis-sentinel： redis集群</li><li>redis-server： redis 服务进程</li></ul><h2 id="_3-启动redis" tabindex="-1"><a class="header-anchor" href="#_3-启动redis" aria-hidden="true">#</a> 3. 启动redis</h2><h3 id="_3-1-前端模式启动" tabindex="-1"><a class="header-anchor" href="#_3-1-前端模式启动" aria-hidden="true">#</a> 3.1 前端模式启动</h3><p>直接运行redis-server将以前端模式启动</p><p><strong>缺点</strong>：ssh命令窗口关闭则redis-server程序结束，<strong>不推荐</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./redis-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如图</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909112943727.png" alt="image-20190909112943727" tabindex="0" loading="lazy"><figcaption>image-20190909112943727</figcaption></figure><h3 id="_3-2-后端模式启动" tabindex="-1"><a class="header-anchor" href="#_3-2-后端模式启动" aria-hidden="true">#</a> 3.2 后端模式启动</h3><p>修改redis.conf 配置文件。daemonize yes 以后端模式启动</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vim /usr/local/redis/bin/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909113153794.png" alt="image-20190909113153794" tabindex="0" loading="lazy"><figcaption>image-20190909113153794</figcaption></figure><p>执行如下命令</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 相对路径情况执行
./redis-server redis.conf

# 全路径执行
/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20190909114017734.png" alt="image-20190909114017734" tabindex="0" loading="lazy"><figcaption>image-20190909114017734</figcaption></figure><h2 id="_4-连接redis" tabindex="-1"><a class="header-anchor" href="#_4-连接redis" aria-hidden="true">#</a> 4. 连接redis</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/usr/local/redis/bin/redis-cli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_5-关闭redis" tabindex="-1"><a class="header-anchor" href="#_5-关闭redis" aria-hidden="true">#</a> 5.关闭redis</h2><p>强行终止redis进程可能会导致redis持久化数据丢失。正确停止Redis的方式应该是向Redis发送SHUTDOWN命令，命令为：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cd /usr/local/redis
./bin/redis-cli shutdown
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-强行终止redis-不推荐" tabindex="-1"><a class="header-anchor" href="#_5-1-强行终止redis-不推荐" aria-hidden="true">#</a> 5.1 强行终止redis(不推荐)</h3><p>会造成数据丢失</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>pkill redis-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_6-开机自启动" tabindex="-1"><a class="header-anchor" href="#_6-开机自启动" aria-hidden="true">#</a> 6. 开机自启动</h2><p>在<code>/etc/rc.local</code>编辑</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vim /etc/rc.local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># redis 开机自启动
/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis-conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,48);function m(h,v){const d=t("ExternalLinkIcon");return r(),n("div",null,[o,i("p",null,[e("具体下载哪个版本可以在"),i("a",g,[e("redis官网"),l(d)]),e("上选择")]),u])}const p=s(c,[["render",m],["__file","db-redis-y-install.html.vue"]]);export{p as default};
