import{_ as o,W as r,X as l,Y as a,Z as e,$ as n,a0 as t,D as i}from"./framework-0cf5f349.js";const c={},d=t(`<h1 id="安装ftp服务" tabindex="-1"><a class="header-anchor" href="#安装ftp服务" aria-hidden="true">#</a> 安装FTP服务</h1><h2 id="_1-安装vsftpd" tabindex="-1"><a class="header-anchor" href="#_1-安装vsftpd" aria-hidden="true">#</a> 1.安装vsftpd</h2><p>安装前先查看ftp 是否已经安装，使用yum 安装</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vsftpd -v
yum -y install vsftpd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-修改配置文件" tabindex="-1"><a class="header-anchor" href="#_2-修改配置文件" aria-hidden="true">#</a> 2. 修改配置文件</h2><p>根据自己的需求，修改ftp配置文件<code>/etc/vsftpd/vsftpd.conf</code></p><div class="language-objectivec line-numbers-mode" data-ext="objectivec"><pre class="language-objectivec"><code>anonymous_enable<span class="token operator">=</span>NO    # 是否允许匿名访问
local_enable<span class="token operator">=</span>YES      # 是否允许使用本地帐户进行 FTP 用户登录验证
local_umask<span class="token operator">=</span><span class="token number">022</span>      # 设置本地用户默认文件掩码<span class="token number">022</span>
chroot_local_user<span class="token operator">=</span>YES   # 是否限定用户在其主目录下（NO 表示允许切换到上级目录）
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">chroot</span><span class="token expression">_list_enable<span class="token operator">=</span>YES # 是否启用限制用户的名单（注释掉为禁用）</span></span>
chroot_list_file<span class="token operator">=</span><span class="token operator">/</span>etc<span class="token operator">/</span>vsftpd<span class="token operator">/</span>chroot_list # 用户列表文件（一行一个用户）
allow_writeable_chroot<span class="token operator">=</span>YES # 如果启用了限定用户在其主目录下需要添加这个配置，解决报错 <span class="token number">500</span> OOPS<span class="token punctuation">:</span> vsftpd<span class="token punctuation">:</span> refusing to run with writable root inside <span class="token function">chroot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
xferlog_enable<span class="token operator">=</span>YES     # 启用上传和下载的日志功能，默认开启。
use_localtime<span class="token operator">=</span>YES     # 是否使用本地时<span class="token punctuation">(</span>自行添加<span class="token punctuation">)</span>
userlist_enable<span class="token operator">=</span>YES 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>chroot_local_user 与 chroot_list_enable 的组合效果如下：</p><table><thead><tr><th></th><th>chroot_local_user=YES</th><th>chroot_local_user=NO</th></tr></thead><tbody><tr><td>chroot_list_enable=YES</td><td>1. 所有用户都被限制在其主目录下 2. 使用 chroot_list_file 指定的用户列表，这些用户作为“例外”，不受限制</td><td>1. 所有用户都不被限制其主目录下 2. 使用 chroot_list_file 指定的用户列表，这些用户作为“例外”，受到限制</td></tr><tr><td>chroot_list_enable=NO</td><td>1. 所有用户都被限制在其主目录下 2. 不使用 chroot_list_file 指定的用户列表，没有任何“例外”用户</td><td>1. 所有用户都不被限制其主目录下 2. 不使用 chroot_list_file 指定的用户列表，没有任何“例外”用户</td></tr></tbody></table><blockquote><p>注意：如果设置了 local_enable=YES ，自带</p></blockquote><h2 id="_3-启动ftp服务" tabindex="-1"><a class="header-anchor" href="#_3-启动ftp服务" aria-hidden="true">#</a> 3. 启动ftp服务</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>systemctl start vsftpd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_4-用户管理" tabindex="-1"><a class="header-anchor" href="#_4-用户管理" aria-hidden="true">#</a> 4. 用户管理</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 使用useradd 命令添加一个用户
useradd ftpuser
# 设置用户密码
passwd ftpuser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-主动模式和被动模式" tabindex="-1"><a class="header-anchor" href="#_5-主动模式和被动模式" aria-hidden="true">#</a> 5. 主动模式和被动模式</h2>`,15),p={href:"https://link.jianshu.com/?t=https%3A%2F%2Fwww.cnblogs.com%2Fxiaohh%2Fp%2F4789813.html",target:"_blank",rel:"noopener noreferrer"},u=a("strong",null,"被动模式",-1),v=t(`<ul><li>开启被动模式（PASV）</li></ul><p>在 <code>/etc/vsftpd/vsftpd.conf</code> 配置文件添加如下配置</p><div class="language-objectivec line-numbers-mode" data-ext="objectivec"><pre class="language-objectivec"><code>pasv_enable<span class="token operator">=</span>YES # 是否允许数据传输时使用PASV模式（默认值为 YES）
pasv_min_port<span class="token operator">=</span>port port_number # PASV 模式下，数据传输使用的端口下界（<span class="token number">0</span> 表示任意。默认值为 <span class="token number">0</span>）把端口范围设在比较高的一段范围内，比如 <span class="token number">50000</span><span class="token operator">-</span><span class="token number">60000</span>，将有助于安全性的提高<span class="token punctuation">.</span>
pasv_max_port<span class="token operator">=</span>port_number # PASV 模式下，数据传输使用的端口上界（<span class="token number">0</span> 表示任意。默认值为 <span class="token number">0</span>）
pasv_promiscuous<span class="token operator">=</span>NO # 是否屏蔽对 PASV 进行安全检查，默认值为 NO（当有安全隧道时可禁用）
pasv_address # PASV 模式中服务器传回的 ip 地址。默认值为 none，即地址是从呼入的连接套接字中获取。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>开启主动模式（PORT）的配置</li></ul><div class="language-objectivec line-numbers-mode" data-ext="objectivec"><pre class="language-objectivec"><code>port_enable<span class="token operator">=</span>YES  # 是否开启 Port 模式
connect_from_port_20<span class="token operator">=</span>YES # 当 Port 模式开启的时候，是否启用默认的 <span class="token number">20</span> 端口监听
ftp_data_port<span class="token operator">=</span>port_number # Port 模式下 FTP 数据传输所使用的端口，默认值为<span class="token number">20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章" aria-hidden="true">#</a> 参考文章</h3>`,6),h={href:"https://www.jianshu.com/p/05dc6455b513",target:"_blank",rel:"noopener noreferrer"};function b(_,m){const s=i("ExternalLinkIcon");return r(),l("div",null,[d,a("p",null,[e("ftp 的主动模式（Port 模式）与被动模式（PASV 模式）的区别："),a("a",p,[e("https://www.cnblogs.com/xiaohh/p/4789813.html"),n(s)]),e(" 本文推荐使用"),u,e("，vsftp 默认即为被动模式")]),v,a("p",null,[a("a",h,[e("CentOS 7 安装 FTP 服务"),n(s)])])])}const f=o(c,[["render",b],["__file","linux-y-ftp-install.html.vue"]]);export{f as default};
