import{_ as t,W as o,X as r,Y as a,Z as n,$ as i,a0 as s,D as c}from"./framework-0cf5f349.js";const g={},p=s('<h1 id="springboot实战-exe4j打包成exe-并注册win服务" tabindex="-1"><a class="header-anchor" href="#springboot实战-exe4j打包成exe-并注册win服务" aria-hidden="true">#</a> SpringBoot实战 - exe4j打包成exe，并注册win服务</h1><h2 id="_1-简介" tabindex="-1"><a class="header-anchor" href="#_1-简介" aria-hidden="true">#</a> 1. 简介</h2><blockquote><p>本文介绍的是 springboot打包成jar后用exe4j打包成exe，并注册成windows服务，无需安装java环境就能直接运行，以前用bat放入启动文件夹，时不时文件被系统或者杀毒删除，导致业主方没有启动项目，今天我们注册成wins服务，杀毒软件再也不会删除了，结合网上的方法实现开机自启亲测有效，下面跟着我一起操作起来。</p></blockquote><h2 id="_2-准备工作" tabindex="-1"><a class="header-anchor" href="#_2-准备工作" aria-hidden="true">#</a> 2. 准备工作</h2><h3 id="_2-1-下载" tabindex="-1"><a class="header-anchor" href="#_2-1-下载" aria-hidden="true">#</a> 2.1 下载</h3>',5),l={href:"https://exe4j.apponic.com/download/",target:"_blank",rel:"noopener noreferrer"},d={href:"https://pan.baidu.com/s/18JvfPU5GDi4ErwNd9E4jJw",target:"_blank",rel:"noopener noreferrer"},u=a("ul",null,[a("li",null,"包含了exe4j 和 服务注册工具")],-1),h=s(`<h3 id="_2-2-安装完成-输入破解秘钥" tabindex="-1"><a class="header-anchor" href="#_2-2-安装完成-输入破解秘钥" aria-hidden="true">#</a> 2.2 安装完成，输入破解秘钥</h3><p>破解密钥：L-g782dn2d-1f1yqxx1rv1sqd（网上找的）</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921091805609.png" alt="image-20220921091805609" tabindex="0" loading="lazy"><figcaption>image-20220921091805609</figcaption></figure><h3 id="_2-3-确保jar包正常运行-使用本地jre" tabindex="-1"><a class="header-anchor" href="#_2-3-确保jar包正常运行-使用本地jre" aria-hidden="true">#</a> 2.3 确保jar包正常运行（使用本地jre）</h3><p>因为我们exe打包给用户，用户可能并没有java环境，所以我们需要使用本地jre</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921093857650.png" alt="image-20220921093857650" tabindex="0" loading="lazy"><figcaption>image-20220921093857650</figcaption></figure><p>此博文 以ruoyi-vue 版本为例</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921092743600.png" alt="image-20220921092743600" tabindex="0" loading="lazy"><figcaption>image-20220921092743600</figcaption></figure><h2 id="_3-打exe包" tabindex="-1"><a class="header-anchor" href="#_3-打exe包" aria-hidden="true">#</a> 3. 打exe包</h2><h3 id="_3-1-步骤一" tabindex="-1"><a class="header-anchor" href="#_3-1-步骤一" aria-hidden="true">#</a> 3.1 步骤一</h3><p>open 可以导入 已经配置好的 XXX.exe4j 配置脚本</p><p>新配置 直接next即可</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921094014148.png" alt="image-20220921094014148" tabindex="0" loading="lazy"><figcaption>image-20220921094014148</figcaption></figure><h3 id="_3-2-步骤二" tabindex="-1"><a class="header-anchor" href="#_3-2-步骤二" aria-hidden="true">#</a> 3.2 步骤二</h3><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220919144257442.png" alt="image-20220919144257442" tabindex="0" loading="lazy"><figcaption>image-20220919144257442</figcaption></figure><h3 id="_3-3-步骤三" tabindex="-1"><a class="header-anchor" href="#_3-3-步骤三" aria-hidden="true">#</a> 3.3 步骤三</h3><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921094253925.png" alt="image-20220921094253925" tabindex="0" loading="lazy"><figcaption>image-20220921094253925</figcaption></figure><h3 id="_3-4-步骤四" tabindex="-1"><a class="header-anchor" href="#_3-4-步骤四" aria-hidden="true">#</a> 3.4 步骤四</h3><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921094856778.png" alt="image-20220921094856778" tabindex="0" loading="lazy"><figcaption>image-20220921094856778</figcaption></figure><p>这个高级选项64位是一定要选的</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220919144924352.png" alt="image-20220919144924352" tabindex="0" loading="lazy"><figcaption>image-20220919144924352</figcaption></figure><h3 id="_3-5-步骤五" tabindex="-1"><a class="header-anchor" href="#_3-5-步骤五" aria-hidden="true">#</a> 3.5 步骤五</h3><p>选择要打包的jar包</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921095131884.png" alt="image-20220921095131884" tabindex="0" loading="lazy"><figcaption>image-20220921095131884</figcaption></figure><p>选择启动类 这里要注意 要选择 springboot的jar包启动类</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921095247307.png" alt="image-20220921095247307" tabindex="0" loading="lazy"><figcaption>image-20220921095247307</figcaption></figure><h3 id="_3-6-步骤六" tabindex="-1"><a class="header-anchor" href="#_3-6-步骤六" aria-hidden="true">#</a> 3.6 步骤六</h3><p>配置 JER 版本</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220919145154975.png" alt="image-20220919145154975" tabindex="0" loading="lazy"><figcaption>image-20220919145154975</figcaption></figure><p>在目标系统上，生成的可执行文件按以下可配置顺序搜索JRE或JDK。</p><p>所以这里最好配成相对exe的路径（比如同级目录，之后将exe和JRE一起打包给用户）</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921095504298.png" alt="image-20220921095504298" tabindex="0" loading="lazy"><figcaption>image-20220921095504298</figcaption></figure><h3 id="_3-7-步骤七" tabindex="-1"><a class="header-anchor" href="#_3-7-步骤七" aria-hidden="true">#</a> 3.7 步骤七</h3><p>如果选择 GUI启动 这里是选择启动图片</p><p>这里我们是控制台启动 所以不配置</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921095622448.png" alt="image-20220921095622448" tabindex="0" loading="lazy"><figcaption>image-20220921095622448</figcaption></figure><h3 id="_3-8-步骤八" tabindex="-1"><a class="header-anchor" href="#_3-8-步骤八" aria-hidden="true">#</a> 3.8 步骤八</h3><p>这里是一些 输出信息配置 这里我们默认就好</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220919145354944.png" alt="image-20220919145354944" tabindex="0" loading="lazy"><figcaption>image-20220919145354944</figcaption></figure><h3 id="_3-9-步骤九" tabindex="-1"><a class="header-anchor" href="#_3-9-步骤九" aria-hidden="true">#</a> 3.9 步骤九</h3><p>编译生成exe (路径在步骤三填写的地址) 编译成功后会跳转到 步骤十</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220919145450324.png" alt="image-20220919145450324" tabindex="0" loading="lazy"><figcaption>image-20220919145450324</figcaption></figure><h3 id="_3-10-步骤十" tabindex="-1"><a class="header-anchor" href="#_3-10-步骤十" aria-hidden="true">#</a> 3.10 步骤十</h3><p>打包完成测试</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220919145501107.png" alt="image-20220919145501107" tabindex="0" loading="lazy"><figcaption>image-20220919145501107</figcaption></figure><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220919151139541.png" alt="image-20220919151139541" tabindex="0" loading="lazy"><figcaption>image-20220919151139541</figcaption></figure><p>导出配置</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921100004983.png" alt="image-20220921100004983" tabindex="0" loading="lazy"><figcaption>image-20220921100004983</figcaption></figure><h2 id="_4-启动与测试" tabindex="-1"><a class="header-anchor" href="#_4-启动与测试" aria-hidden="true">#</a> 4. 启动与测试</h2><p>双击就能启动我们exe，可以看到控制台已经启动了</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921100358747.png" alt="image-20220921100358747" tabindex="0" loading="lazy"><figcaption>image-20220921100358747</figcaption></figure><p>输入我们的8080端口，可以看到项目已经跑起来了</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921100435788.png" alt="image-20220921100435788" tabindex="0" loading="lazy"><figcaption>image-20220921100435788</figcaption></figure><h2 id="_5-注册成windows服务" tabindex="-1"><a class="header-anchor" href="#_5-注册成windows服务" aria-hidden="true">#</a> 5. 注册成windows服务</h2><h3 id="_5-1-注册服务" tabindex="-1"><a class="header-anchor" href="#_5-1-注册服务" aria-hidden="true">#</a> 5.1 注册服务</h3><p>将下载好的instsrv.exe和srvany.exe放进我们的 F:\\fadu\\02_ruoyi\\exe 文件夹 在PowerShell中输入(win-运行中搜索PowerShell)</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
F:<span class="token punctuation">\\</span>fadu<span class="token punctuation">\\</span>02_ruoyi<span class="token punctuation">\\</span>exe<span class="token punctuation">\\</span>instsrv.exe ruoyi-server  F:<span class="token punctuation">\\</span>fadu<span class="token punctuation">\\</span>02_ruoyi<span class="token punctuation">\\</span>exe<span class="token punctuation">\\</span>srvany.exe 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921101055841.png" alt="image-20220921101055841" tabindex="0" loading="lazy"><figcaption>image-20220921101055841</figcaption></figure><h3 id="_5-2-注册表" tabindex="-1"><a class="header-anchor" href="#_5-2-注册表" aria-hidden="true">#</a> 5.2 注册表</h3><p>win+R 输入regedit 打开注册表 找到HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\ruoyi-server 右键添加项Parameters 在项里添加字符串值 AppDirectory 数据 F:\\fadu\\02_ruoyi\\exe Application 数据 F:\\fadu\\02_ruoyi\\exe\\ruoyi.exe <img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921101829291.png" alt="image-20220921101829291" loading="lazy"></p><h3 id="_5-3-查看服务" tabindex="-1"><a class="header-anchor" href="#_5-3-查看服务" aria-hidden="true">#</a> 5.3 查看服务</h3><p>计算机—&gt;管理-----&gt;服务找到我们的ruoyi-server服务</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921102058809.png" alt="image-20220921102058809" tabindex="0" loading="lazy"><figcaption>image-20220921102058809</figcaption></figure><p>启动服务</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921102239384.png" alt="image-20220921102239384" tabindex="0" loading="lazy"><figcaption>image-20220921102239384</figcaption></figure><h3 id="_5-4-测试" tabindex="-1"><a class="header-anchor" href="#_5-4-测试" aria-hidden="true">#</a> 5.4 测试</h3><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921102311268.png" alt="image-20220921102311268" tabindex="0" loading="lazy"><figcaption>image-20220921102311268</figcaption></figure><p>直接打开浏览器可以看到我们的项目启动成功了，然后大家可以测试关机，再开机访问</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921102325148.png" alt="image-20220921102325148" tabindex="0" loading="lazy"><figcaption>image-20220921102325148</figcaption></figure><h3 id="_5-5-移除服务" tabindex="-1"><a class="header-anchor" href="#_5-5-移除服务" aria-hidden="true">#</a> 5.5 移除服务</h3><p>最后移除服务可以cmd输入，但是要先停止这个服务才能移除</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>F:<span class="token punctuation">\\</span>fadu<span class="token punctuation">\\</span>02_ruoyi<span class="token punctuation">\\</span>exe<span class="token punctuation">\\</span>instsrv.exe ruoyi-server remove
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5-6-懒人法-使用bat脚本完成5-1-5-4-步" tabindex="-1"><a class="header-anchor" href="#_5-6-懒人法-使用bat脚本完成5-1-5-4-步" aria-hidden="true">#</a> 5.6 （懒人法）使用bat脚本完成5.1-5.4 步</h3><p>智慧的我知道你们懒得收到配置所以提供了一个懒人方法建立一个bat文件，输入</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>@echo off
%1 mshta vbscript:CreateObject<span class="token punctuation">(</span><span class="token string">&quot;Shell.Application&quot;</span><span class="token punctuation">)</span>.ShellExecute<span class="token punctuation">(</span><span class="token string">&quot;cmd.exe&quot;</span>,<span class="token string">&quot;/c %~s0 ::&quot;</span>,<span class="token string">&quot;&quot;</span>,<span class="token string">&quot;runas&quot;</span>,1<span class="token punctuation">)</span><span class="token punctuation">(</span>window.close<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">exit</span>
F:<span class="token punctuation">\\</span>fadu<span class="token punctuation">\\</span>02_ruoyi<span class="token punctuation">\\</span>exe<span class="token punctuation">\\</span>instsrv.exe ruoyi-server  F:<span class="token punctuation">\\</span>fadu<span class="token punctuation">\\</span>02_ruoyi<span class="token punctuation">\\</span>exe<span class="token punctuation">\\</span>srvany.exe
reg <span class="token function">add</span> HKEY_LOCAL_MACHINE<span class="token punctuation">\\</span>SYSTEM<span class="token punctuation">\\</span>CurrentControlSet<span class="token punctuation">\\</span>Services<span class="token punctuation">\\</span>ruoyi-server<span class="token punctuation">\\</span>Parameters
reg <span class="token function">add</span> HKEY_LOCAL_MACHINE<span class="token punctuation">\\</span>SYSTEM<span class="token punctuation">\\</span>CurrentControlSet<span class="token punctuation">\\</span>Services<span class="token punctuation">\\</span>ruoyi-server<span class="token punctuation">\\</span>Parameters /v AppDirectory /d <span class="token string">&quot;F:<span class="token entity" title="\\f">\\f</span>adu<span class="token entity" title="\\02">\\02</span>_ruoyi<span class="token entity" title="\\e">\\e</span>xe&quot;</span> /t reg_sz /f
reg <span class="token function">add</span> HKEY_LOCAL_MACHINE<span class="token punctuation">\\</span>SYSTEM<span class="token punctuation">\\</span>CurrentControlSet<span class="token punctuation">\\</span>Services<span class="token punctuation">\\</span>ruoyi-server<span class="token punctuation">\\</span>Parameters /v Application /d <span class="token string">&quot;F:<span class="token entity" title="\\f">\\f</span>adu<span class="token entity" title="\\02">\\02</span>_ruoyi<span class="token entity" title="\\e">\\e</span>xe<span class="token entity" title="\\r">\\r</span>uoyi.exe&quot;</span> /t reg_sz /f
net start ruoyi-server


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意修改路径和名称</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/image-20220921105705692.png" alt="image-20220921105705692" tabindex="0" loading="lazy"><figcaption>image-20220921105705692</figcaption></figure><p>注意：</p><p>win中可以用%~dp0 替代当前目录</p><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章" aria-hidden="true">#</a> 参考文章</h2>`,80),b={href:"https://blog.csdn.net/qq_34867069/article/details/126072254",target:"_blank",rel:"noopener noreferrer"},m={href:"https://blog.csdn.net/weixin_40461281/article/details/105771843",target:"_blank",rel:"noopener noreferrer"};function f(z,x){const e=c("ExternalLinkIcon");return o(),r("div",null,[p,a("ul",null,[a("li",null,[a("p",null,[n("官网下载："),a("a",l,[n("https://exe4j.apponic.com/download/"),i(e)])])]),a("li",null,[a("p",null,[n("博主版本的：链接:"),a("a",d,[n("https://pan.baidu.com/s/18JvfPU5GDi4ErwNd9E4jJw"),i(e)]),n(" 密码:ip81")]),u])]),h,a("p",null,[a("a",b,[n("springboot打包成jar后用exe4j打包成exe，并注册成windows服务"),i(e)])]),a("p",null,[a("a",m,[n("SpringBoot 2.x 使用 exe4j 打包成 exe 可执行文件(附带启动传参)"),i(e)])])])}const y=t(g,[["render",f],["__file","springboot-y-action-exe4j.html.vue"]]);export{y as default};
