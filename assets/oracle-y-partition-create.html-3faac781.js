import{_ as s,W as e,X as t,Y as n,Z as i,$ as p,a0 as o,D as l}from"./framework-0cf5f349.js";const c={},r=o(`<h1 id="oracle分区表-自动创建的分区" tabindex="-1"><a class="header-anchor" href="#oracle分区表-自动创建的分区" aria-hidden="true">#</a> oracle分区表-自动创建的分区</h1><h2 id="_1-创建按月分区的分区表" tabindex="-1"><a class="header-anchor" href="#_1-创建按月分区的分区表" aria-hidden="true">#</a> 1. 创建按月分区的分区表</h2><h3 id="_1-1-创建分区表" tabindex="-1"><a class="header-anchor" href="#_1-1-创建分区表" aria-hidden="true">#</a> 1.1 创建分区表</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> intervalpart <span class="token punctuation">(</span>c1 NUMBER<span class="token punctuation">,</span> c3 <span class="token keyword">DATE</span><span class="token punctuation">)</span>

<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> RANGE <span class="token punctuation">(</span>c3<span class="token punctuation">)</span>

   <span class="token keyword">INTERVAL</span> <span class="token punctuation">(</span> NUMTOYMINTERVAL <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;MONTH&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

   <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> part1

       <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span>TO_DATE <span class="token punctuation">(</span><span class="token string">&#39;01/12/2010&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;MM/DD/YYYY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token keyword">PARTITION</span> part2

       <span class="token keyword">VALUES</span> LESS THAN <span class="token punctuation">(</span>TO_DATE <span class="token punctuation">(</span><span class="token string">&#39;02/12/2010&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;MM/DD/YYYY&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：<strong>如果在建Interval分区表是没有把所有的分区写完成，在插入相关数据后</strong>会自动生成分区</strong></p><h3 id="_1-2-查看现在表的分区" tabindex="-1"><a class="header-anchor" href="#_1-2-查看现在表的分区" aria-hidden="true">#</a> 1.2 查看现在表的分区:</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> table_name<span class="token punctuation">,</span>partition_name <span class="token keyword">from</span> user_tab_partitions <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">&#39;INTERVALPART&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201103234450655.png" alt="image-20201103234450655" tabindex="0" loading="lazy"><figcaption>image-20201103234450655</figcaption></figure><h3 id="_1-3-插入测试数据" tabindex="-1"><a class="header-anchor" href="#_1-3-插入测试数据" aria-hidden="true">#</a> 1.3 插入测试数据：</h3><p>向intervalpart 表插入2020.1.1号后的19个月数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">begin</span>
<span class="token keyword">for</span> i <span class="token operator">in</span> <span class="token number">0</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">11</span> <span class="token keyword">loop</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> intervalpart <span class="token keyword">values</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>add_months<span class="token punctuation">(</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2020-1-1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-mm-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">loop</span> <span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>
 <span class="token keyword">end</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**补充：**add_months()函数获取前一个月或者下一个月的月份， 参数中 负数 代表 往前， 正数 代表 往后。</p><ul><li><p>上一个月</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> to_char<span class="token punctuation">(</span>add_months<span class="token punctuation">(</span>trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;yyyymm&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>下一个月</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> to_char<span class="token punctuation">(</span>add_months<span class="token punctuation">(</span>trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;yyyymm&#39;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201103234904783.png" alt="image-20201103234904783" tabindex="0" loading="lazy"><figcaption>image-20201103234904783</figcaption></figure></li></ul><h3 id="_1-4-观察自动创建的分区" tabindex="-1"><a class="header-anchor" href="#_1-4-观察自动创建的分区" aria-hidden="true">#</a> 1.4 观察自动创建的分区：</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> table_name<span class="token punctuation">,</span>partition_name <span class="token keyword">from</span> user_tab_partitions <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">&#39;INTERVALPART&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201103235039044.png" alt="image-20201103235039044" tabindex="0" loading="lazy"><figcaption>image-20201103235039044</figcaption></figure><h3 id="_1-5-查看分区内容" tabindex="-1"><a class="header-anchor" href="#_1-5-查看分区内容" aria-hidden="true">#</a> 1.5 查看分区内容：</h3><ul><li><p>查询所有</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>select * from INTERVALPART;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201103235352870.png" alt="image-20201103235352870" tabindex="0" loading="lazy"><figcaption>image-20201103235352870</figcaption></figure></li><li><p>查询指定分区</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>select * from INTERVALPART partition(part2);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201103235835676.png" alt="image-20201103235835676" tabindex="0" loading="lazy"><figcaption>image-20201103235835676</figcaption></figure></li></ul><h2 id="_2-创建一个以天为间隔的分区表" tabindex="-1"><a class="header-anchor" href="#_2-创建一个以天为间隔的分区表" aria-hidden="true">#</a> 2. 创建一个以天为间隔的分区表：</h2><h3 id="_2-1-创建分区表" tabindex="-1"><a class="header-anchor" href="#_2-1-创建分区表" aria-hidden="true">#</a> 2.1 创建分区表：</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> dave
<span class="token punctuation">(</span>
		id    number<span class="token punctuation">,</span>
		dt    <span class="token keyword">date</span>
<span class="token punctuation">)</span>
<span class="token keyword">partition</span> <span class="token keyword">by</span> range <span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
	<span class="token keyword">INTERVAL</span> <span class="token punctuation">(</span>NUMTODSINTERVAL<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;day&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">(</span>
 		<span class="token keyword">partition</span> p100101 <span class="token keyword">values</span> less than <span class="token punctuation">(</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2020-01-01&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-mm-dd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-查看表分区" tabindex="-1"><a class="header-anchor" href="#_2-2-查看表分区" aria-hidden="true">#</a> 2.2 查看表分区</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> table_name<span class="token punctuation">,</span>partition_name <span class="token keyword">from</span> user_tab_partitions <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">&#39;DAVE&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201104000207367.png" alt="image-20201104000207367" tabindex="0" loading="lazy"><figcaption>image-20201104000207367</figcaption></figure><h3 id="_2-3-插入测试数据" tabindex="-1"><a class="header-anchor" href="#_2-3-插入测试数据" aria-hidden="true">#</a> 2.3 插入测试数据</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">begin</span>
<span class="token keyword">for</span> i <span class="token operator">in</span> <span class="token number">1</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">12</span> <span class="token keyword">loop</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dave <span class="token keyword">values</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>trunc<span class="token punctuation">(</span>to_date<span class="token punctuation">(</span><span class="token string">&#39;2020-1-1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyyy-mm-dd&#39;</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-观察自动创建的分区" tabindex="-1"><a class="header-anchor" href="#_2-4-观察自动创建的分区" aria-hidden="true">#</a> 2.4 观察自动创建的分区：</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code> <span class="token keyword">select</span> table_name<span class="token punctuation">,</span>partition_name <span class="token keyword">from</span> user_tab_partitions <span class="token keyword">where</span> table_name<span class="token operator">=</span><span class="token string">&#39;DAVE&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201104000413036.png" alt="image-20201104000413036" tabindex="0" loading="lazy"><figcaption>image-20201104000413036</figcaption></figure><h3 id="_2-5-查看分区内容" tabindex="-1"><a class="header-anchor" href="#_2-5-查看分区内容" aria-hidden="true">#</a> 2.5 查看分区内容：</h3><ul><li><p>查看所有</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dave <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201104000802542.png" alt="image-20201104000802542" tabindex="0" loading="lazy"><figcaption>image-20201104000802542</figcaption></figure></li><li><p>查看指定分区</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dave <span class="token keyword">partition</span><span class="token punctuation">(</span>SYS_P54<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20201104000653069.png" alt="image-20201104000653069" tabindex="0" loading="lazy"><figcaption>image-20201104000653069</figcaption></figure></li></ul><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章" aria-hidden="true">#</a> 参考文章</h2>`,32),d={href:"https://blog.csdn.net/tianlesoftware/article/details/5662337",target:"_blank",rel:"noopener noreferrer"};function u(k,g){const a=l("ExternalLinkIcon");return e(),t("div",null,[r,n("p",null,[n("a",d,[i("分区表 之 Interval分区 和 虚拟列 按星期分区表"),p(a)])])])}const v=s(c,[["render",u],["__file","oracle-y-partition-create.html.vue"]]);export{v as default};
