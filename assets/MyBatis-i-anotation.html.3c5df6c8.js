import{_ as s}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as t,c as p,a as n,b as e,e as o,r as u}from"./app.b033f773.js";const c={},l=o(`<h1 id="mybatis\u6CE8\u89E3\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#mybatis\u6CE8\u89E3\u65B9\u5F0F" aria-hidden="true">#</a> MyBatis\u6CE8\u89E3\u65B9\u5F0F</h1><blockquote><p>\u6211\u4EEC\u77E5\u9053\u9664\u4E86XML\u914D\u7F6E\u65B9\u5F0F\uFF0CMyBatis\u8FD8\u652F\u6301\u6CE8\u89E3\u65B9\u5F0F\u3002\u672C\u6587\u4E3B\u8981\u4ECB\u7ECDSpringBoot+MyBatis\u6CE8\u89E3\u65B9\u5F0F\u3002</p></blockquote><h2 id="_1-\u51C6\u5907\u77E5\u8BC6" tabindex="-1"><a class="header-anchor" href="#_1-\u51C6\u5907\u77E5\u8BC6" aria-hidden="true">#</a> 1. \u51C6\u5907\u77E5\u8BC6</h2><blockquote><p>MyBatis\u7684\u76F8\u5173\u77E5\u8BC6\u4F53\u7CFB\u3002</p></blockquote><p>\u5728\u6784\u5EFA\u77E5\u8BC6\u4F53\u7CFB\u65F6\uFF1A\u6211\u4EEC\u6700\u91CD\u8981\u7684<strong>\u76EE\u6807\u5E76\u4E0D\u662F\u5982\u4F55\u4F7F\u7528\u6CE8\u89E3\u65B9\u5F0F</strong>\uFF0C\u800C\u662F\u8981\u7406\u89E3\uFF1A</p><ol><li>\u5BF9\u4E8E\u6709\u539F\u6709xml\u65B9\u5F0F\u6539\u4E3A\u6CE8\u89E3\u65B9\u5F0F\uFF08\u4E00\u5B9A\u8981\u6709\u5BF9\u6BD4\uFF09\uFF0C\u5982\u4F55\u5199\uFF1F <ol><li>\u57FA\u672C\u7684CRUD\u600E\u4E48\u7528\u6CE8\u89E3\u5199\uFF1F</li><li>\u5BF9\u4E8E\u590D\u6742\u7684\u52A8\u6001SQL\u5982\u4F55\u5199\uFF1F</li><li>\u5BF9\u4E8E\u8868\u5173\u8054\u7684\u5982\u4F55\u5199\uFF1F</li></ol></li><li>\u4E3A\u4EC0\u4E48xml\u65B9\u5F0F\u4F9D\u7136\u662F\u6BD4\u6CE8\u89E3\u65B9\u5F0F\u4F7F\u7528\u5E7F\u6CDB\uFF1F <ol><li>xml\u65B9\u5F0F\u548C\u6CE8\u89E3\u65B9\u5F0F\u6DF7\u5408\u4F7F\u7528\uFF1F</li></ol></li><li>\u6CE8\u89E3\u65B9\u5F0F\u662F\u5982\u4F55\u5DE5\u4F5C\u7684\u5462\uFF1F</li></ol><h2 id="_2-\u57FA\u672C\u67E5\u6539\u5220\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_2-\u57FA\u672C\u67E5\u6539\u5220\u64CD\u4F5C" aria-hidden="true">#</a> 2. \u57FA\u672C\u67E5\u6539\u5220\u64CD\u4F5C</h2><blockquote><p>\u6211\u4EEC\u4ECE\u6700\u57FA\u672C\u7684\u589E\u5220\u6539\u64CD\u4F5C\u5F00\u59CB\uFF0C\u5BF9\u6BD4xml\u65B9\u5F0F\u8FDB\u884C\u7406\u89E3\u3002</p></blockquote><h3 id="_2-1-\u67E5\u8BE2\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_2-1-\u67E5\u8BE2\u64CD\u4F5C" aria-hidden="true">#</a> 2.1 \u67E5\u8BE2\u64CD\u4F5C</h3><h4 id="_2-1-1-results\u548C-result\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-1-1-results\u548C-result\u6CE8\u89E3" aria-hidden="true">#</a> 2.1.1 @Results\u548C@Result\u6CE8\u89E3</h4><blockquote><p>\u5BF9\u4E8Exml\u914D\u7F6E\u67E5\u8BE2\u65F6\u5B9A\u4E49\u7684ResultMap, \u5728\u6CE8\u89E3\u4E2D\u5982\u4F55\u5B9A\u4E49\u5462\uFF1F</p></blockquote><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserResult1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span>     <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>       	<span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>      		<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_name<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phone_number<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u6CE8\u89E3\u65B9\u5F0F\uFF0C\u7528@Results\u6CE8\u89E3\u5BF9\u5E94</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>
        id <span class="token operator">=</span> <span class="token string">&quot;UserResult1&quot;</span><span class="token punctuation">,</span>
        value <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;userName&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;user_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;phoneNumber&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;phone_number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;update_time&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-1-2-select\u548C-param\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-1-2-select\u548C-param\u6CE8\u89E3" aria-hidden="true">#</a> 2.1.2 @Select\u548C@Param\u6CE8\u89E3</h4><blockquote><p>\u5BF9\u4E8E\u67E5\u8BE2\uFF0C\u7528@Select\u6CE8\u89E3\uFF1B\u5BF9\u4E8E\u53C2\u6570, \u4F7F\u7528@Param\u6CE8\u89E3</p></blockquote><p>\u6240\u4EE5\u6839\u636E\u7528\u6237ID\u67E5\u8BE2\u7528\u6237\uFF0C\u4F7F\u7528\u6CE8\u89E3\u65B9\u5F0F\u5199\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>
        id <span class="token operator">=</span> <span class="token string">&quot;UserResult1&quot;</span><span class="token punctuation">,</span>
        value <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;userName&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;user_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;phoneNumber&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;phone_number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;update_time&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time from tb_user u where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">User</span> <span class="token function">findById1</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-1-3-resultmap\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-1-3-resultmap\u6CE8\u89E3" aria-hidden="true">#</a> 2.1.3 @ResultMap\u6CE8\u89E3</h4><blockquote><p>xml\u914D\u7F6E\u67E5\u8BE2\u65F6\u5B9A\u4E49\u7684ResultMap\u662F\u53EF\u4EE5\u590D\u7528\u7684\uFF0C\u90A3\u4E48\u6211\u4EEC\u4E0A\u9762\u901A\u8FC7@Results\u5B9A\u4E49\u5728\u67D0\u4E2A\u65B9\u6CD5\u4E0A\u7684\uFF0C\u5982\u4F55\u590D\u7528\u5462\uFF1F</p></blockquote><p>\u6BD4\u5982\u67E5\u8BE2\u6240\u6709\u7528\u6237\u8FD4\u56DE\u7528\u6237\u5B9E\u4F53@Results\u662F\u548C\u67E5\u8BE2\u5355\u4E2A\u7528\u6237\u4E00\u81F4\u7684\uFF0C\u90A3\u4E48\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7@ResultMap\u6307\u5B9A\u8FD4\u56DE\u503C\u5BF9\u5E94\u5173\u7CFB</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ResultMap</span><span class="token punctuation">(</span><span class="token string">&quot;UserResult1&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time from tb_user u&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">User</span> <span class="token function">findAll1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7531\u6B64\u4F60\u53EF\u4EE5\u731C\u5230\uFF0C@ResultMap\u5B9A\u4E49\u5728\u54EA\u4E2A\u65B9\u6CD5\u4E0A\u5E76\u6CA1\u6709\u4EC0\u4E48\u5173\u7CFB\uFF0C\u56E0\u4E3A\u5B83\u4F1A\u88AB\u4F18\u5148\u901A\u8FC7\u6CE8\u89E3\u89E3\u6790\u4E3A\u6570\u636E\u5E93\u5B57\u6BB5\u4E0EJava\u5B57\u6BB5\u7684\u6620\u5C04\u5173\u7CFB\u3002</p><h4 id="_2-1-4-\u8868\u5173\u8054\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_2-1-4-\u8868\u5173\u8054\u67E5\u8BE2" aria-hidden="true">#</a> 2.1.4 \u8868\u5173\u8054\u67E5\u8BE2</h4><blockquote><p>\u7528\u6237\u548C\u89D2\u8272\u5B58\u5728\u7740\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\uFF0C\u4E0A\u9762\u7684\u67E5\u8BE2\u53EA\u662F\u67E5\u8BE2\u4E86\u7528\u6237\u7684\u57FA\u672C\u4FE1\u606F\uFF0C\u5982\u4F55\u5173\u8054\u67E5\u8BE2\uFF08\u67E5\u8BE2\u7528\u6237\u540C\u65F6\u8FD4\u56DE\u89D2\u8272\u4FE1\u606F\uFF09\u5462\uFF1F</p></blockquote><p>\u6211\u4EEC\u770B\u4E0Bxml\u914D\u7F6E\u65B9\u5F0F\u662F\u5982\u4F55\u505A\u5230\u7684\uFF1F</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserResult<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span>     <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>       	<span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>      		<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_name<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phone_number<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_key<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u6CE8\u89E3\u65B9\u5F0F, \u53EF\u4EE5\u901A\u8FC7@Results+@Many\u6CE8\u89E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>
        id <span class="token operator">=</span> <span class="token string">&quot;UserResult&quot;</span><span class="token punctuation">,</span>
        value <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;userName&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;user_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;phoneNumber&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;phone_number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;update_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;roles&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;tech.pdai.springboot.mysql57.mybatis.anno.dao.IRoleDao.findRoleByUserId&quot;</span><span class="token punctuation">,</span> fetchType <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">EAGER</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2DfindRoleByUserId\u662F\u901A\u8FC7user\u8868\u4E2D\u7684id\u67E5\u627ERole, \u5177\u4F53\u65B9\u6CD5\u5982\u4E0B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>
            id <span class="token operator">=</span> <span class="token string">&quot;RoleResult&quot;</span><span class="token punctuation">,</span>
            value <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;roleKey&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;role_key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;create_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;update_time&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select r.id, r.name, r.role_key, r.description, r.create_time, r.update_time from tb_role r, tb_user_role ur where r.id = ur.user_id and ur.user_id = #{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> <span class="token function">findRoleByUserId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E8E\u4E00\u5BF9\u4E00\u7684\u53EF\u4EE5\u4F7F\u7528@One\u6CE8\u89E3\u3002</p><h3 id="_2-2-\u63D2\u5165\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_2-2-\u63D2\u5165\u64CD\u4F5C" aria-hidden="true">#</a> 2.2 \u63D2\u5165\u64CD\u4F5C</h3><blockquote><p>\u6D89\u53CA\u63D2\u5165\u64CD\u4F5C\u7684\u4E3B\u8981\u6CE8\u89E3\u6709\uFF1A@Insert, @SelectKey\u7B49\u3002</p></blockquote><h4 id="_2-2-1-insert\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-2-1-insert\u6CE8\u89E3" aria-hidden="true">#</a> 2.2.1 @Insert\u6CE8\u89E3</h4><p>\u5BF9\u4E8E\u63D2\u5165\u64CD\u4F5C\uFF0C\u5728xml\u914D\u7F6E\u53EF\u4EE5\u5B9A\u4E49\u4E3A\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>save<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 		insert into tb_user(
 			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>user_name,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password != null and password != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>password,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
 			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email != null and email != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>email,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber != null and phoneNumber != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>phone_number,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
 			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description != null and description != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>description,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
 			create_time,
			update_time
 		)values(
 			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#{userName},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password != null and password != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#{password},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
 			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email != null and email != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#{email},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
 			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber != null and phoneNumber != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#{phoneNumber},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
 			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description != null and description != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>#{description},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
 			sysdate(),
			sysdate()
 		)
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7279\u522B\u662F\uFF0C\u8FD9\u91CC\u901A\u8FC7<code>&lt;if&gt;</code>\u5224\u65AD\u6761\u4EF6\u66F4\u65B0\u7684\u60C5\u51B5\u5E94\u8BE5\u5982\u4F55\u5728\u6CE8\u89E3\u4E2D\u5199\u5462\uFF1F</p><p>\u53EF\u4EE5\u901A\u8FC7@Insert + <code>&lt;script&gt;</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;&lt;script&gt; &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;insert into tb_user(\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;userName != null and userName != &#39;&#39;\\&quot;&gt;user_name,&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;password != null and password != &#39;&#39;\\&quot;&gt;password,&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;email != null and email != &#39;&#39;\\&quot;&gt;email,&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;phoneNumber != null and phoneNumber != &#39;&#39;\\&quot;&gt;phone_number,&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;description != null and description != &#39;&#39;\\&quot;&gt;description,&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; create_time,\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; update_time\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; )values(\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;userName != null and userName != &#39;&#39;\\&quot;&gt;#{userName},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;password != null and password != &#39;&#39;\\&quot;&gt;#{password},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;email != null and email != &#39;&#39;\\&quot;&gt;#{email},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;phoneNumber != null and phoneNumber != &#39;&#39;\\&quot;&gt;#{phoneNumber},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;description != null and description != &#39;&#39;\\&quot;&gt;#{description},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; sysdate(),\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; sysdate()\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; )&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &lt;/script&gt;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> keyProperty <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-2-\u8FD4\u56DEinsert\u540E\u5B9E\u4F53\u7684\u4E3B\u952E\u503C" tabindex="-1"><a class="header-anchor" href="#_2-2-2-\u8FD4\u56DEinsert\u540E\u5B9E\u4F53\u7684\u4E3B\u952E\u503C" aria-hidden="true">#</a> 2.2.2 \u8FD4\u56DEInsert\u540E\u5B9E\u4F53\u7684\u4E3B\u952E\u503C</h4><blockquote><p>\u4E0A\u8FF0<code>@Options(useGeneratedKeys = true, keyProperty = &quot;id&quot;)</code> \u8868\u793A\u4EC0\u4E48\u610F\u601D\u5462\uFF1F</p></blockquote><p>\u8868\u793A\uFF0C\u5982\u679C\u6570\u636E\u5E93\u63D0\u4F9B\u4E86\u81EA\u589E\u5217\u751F\u6210Key\u7684\u65B9\u5F0F\uFF08\u6BD4\u5982\u8FD9\u91CC\u7684id), \u5E76\u4E14\u9700\u8981\u8FD4\u56DE\u81EA\u589E\u4E3B\u952E\u65F6\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\u8FD4\u56DE\u5B9E\u4F53\u3002</p><p>\u90A3\u4E48\uFF0C\u5982\u679Cid\u7684\u81EA\u589E\u4E0D\u4F7F\u7528\u6570\u636E\u5E93\u81EA\u589E\u4E3B\u952E\u65F6, \u5728xml\u4E2D\u53EF\u4EE5\u4F7F\u7528SelectKey\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyColumn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT LAST_INSERT_ID()
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u5E94\u7740\u6CE8\u89E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SelectKey</span><span class="token punctuation">(</span>statement <span class="token operator">=</span> <span class="token string">&quot;SELECT LAST_INSERT_ID()&quot;</span><span class="token punctuation">,</span> keyColumn <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> keyProperty <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> resultType <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> before <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>before = false</code>, \u76F8\u5F53\u4E8EXML\u4E2D\u7684order=&quot;AFTRE&quot;\uFF0C\u8FD9\u662FMySql\u6570\u636E\u5E93\u7684\u914D\u7F6E\u3002</li><li><code>before = true</code>, \u76F8\u5F53\u4E8EXML\u4E2D\u7684order=&quot;BEFORE&quot;\uFF0C\u8FD9\u662FOracle\u6570\u636E\u5E93\u7684\u914D\u7F6E\u3002</li></ul><p>\u6CE8\u610F\u4E8B\u9879\uFF1A\u4E0D\u540C\u7684\u6570\u636E\u5E93statement\u7684\u503C\u4F1A\u4E0D\u540C\uFF0C\u4E0A\u9762\u4E2D\u7684\u503C\u9002\u7528\u4E8EMySql\u6570\u636E\u5E93\uFF0C\u4F7F\u7528\u5176\u4ED6\u7C7B\u578B\u7684\u6570\u636E\u5E93\u65F6\u8981\u6CE8\u610F\u4FEE\u6539\u3002</p><h3 id="_2-3-\u66F4\u65B0\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_2-3-\u66F4\u65B0\u64CD\u4F5C" aria-hidden="true">#</a> 2.3 \u66F4\u65B0\u64CD\u4F5C</h3><blockquote><p>\u6D89\u53CA\u66F4\u65B0\u64CD\u4F5C\u7684\u4E3B\u8981\u6CE8\u89E3\u6709\uFF1A@Update\u7B49\u3002</p></blockquote><h4 id="_2-3-1-update-\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-3-1-update-\u6CE8\u89E3" aria-hidden="true">#</a> 2.3.1 @Update \u6CE8\u89E3</h4><p>\u5BF9\u4E8Exml\u7684\u66F4\u65B0\u64CD\u4F5C\u5982\u4E0B\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  update tb_user
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName != null and userName != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>user_name = #{userName},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email != null and email != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>email = #{email},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber != null and phoneNumber != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>phone_number = #{phoneNumber},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description != null and description != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>description = #{description},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    update_time = sysdate()
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
  where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updatePassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  update tb_user
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
    password = #{password}, update_time = sysdate()
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
  where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u5E94\u7684\u6CE8\u89E3\u5199\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;update tb_user set password = #{password}, update_time = sysdate()&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; where id = #{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">updatePassword</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;&lt;script&gt; &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update tb_user\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;set&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;userName != null and userName != &#39;&#39;\\&quot;&gt;user_name = #{userName},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;email != null and email != &#39;&#39;\\&quot;&gt;email = #{email},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;phoneNumber != null and phoneNumber != &#39;&#39;\\&quot;&gt;phone_number = #{phoneNumber},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;if test=\\&quot;description != null and description != &#39;&#39;\\&quot;&gt;description = #{description},&lt;/if&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; update_time = sysdate()\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; &lt;/set&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot; where id = #{id}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &lt;/script&gt;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-\u5220\u9664\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_2-4-\u5220\u9664\u64CD\u4F5C" aria-hidden="true">#</a> 2.4 \u5220\u9664\u64CD\u4F5C</h3><blockquote><p>\u6D89\u53CA\u5220\u9664\u64CD\u4F5C\u7684\u4E3B\u8981\u6CE8\u89E3\u6709\uFF1A@Delete\u7B49\u3002</p></blockquote><h4 id="_2-4-1-delete-\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2-4-1-delete-\u6CE8\u89E3" aria-hidden="true">#</a> 2.4.1 @Delete \u6CE8\u89E3</h4><p>\u5BF9\u4E8Exml\u7684\u5220\u9664\u64CD\u4F5C\u5982\u4E0B\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Long<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  delete from tb_user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Long<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  delete from tb_user where id in
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    #{id}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u5E94\u7684\u6CE8\u89E3\u5199\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from tb_user where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;&lt;script&gt; &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;delete from tb_user where id in\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot;&lt;foreach collection=\\&quot;array\\&quot; item=\\&quot;id\\&quot; open=\\&quot;(\\&quot; separator=\\&quot;,\\&quot; close=\\&quot;)\\&quot;&gt;\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot;#{id}\\n&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot;&lt;/foreach&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &lt;/script&gt;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">deleteByIds</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-provider\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_3-provider\u6CE8\u89E3" aria-hidden="true">#</a> 3. Provider\u6CE8\u89E3</h2><blockquote><p>\u5176\u5B9E\u4F60\u53EF\u4EE5\u53D1\u73B0\u901A\u8FC7\u6CE8\u89E3\u65B9\u5F0F\uFF0C\u5BF9\u4E8E\u6709\u4E00\u4E9B\u9700\u8981\u901A\u8FC7\u52A8\u6001\u6784\u5EFA\u67E5\u8BE2\u6761\u4EF6\u7684\u64CD\u4F5C\u662F\u975E\u5E38\u4E0D\u65B9\u4FBF\u7684\u3002MyBatis\u7684\u4F5C\u8005\u4EEC\u81EA\u7136\u5C31\u60F3\u5230\u4E86\u52A8\u6001\u6784\u5EFASQL\uFF0C\u52A8\u6001\u6784\u5EFASQL\u7684\u65B9\u5F0F\u662F\u914D\u5408@Provider\u6CE8\u89E3\u6765\u5B8C\u6210\u7684\u3002</p></blockquote><p>MyBatis\u63D0\u4F9B\u4E864\u79CDProvider\u6CE8\u89E3\uFF0C\u5206\u522B\u662F@SelectProvider\u3001@InsertProvider\u3001@UpdateProvider\u548C@DeleteProvider\u3002</p><p>\u8FD9\u91CC\u4EE5@SelectProvider\u4E3A\u4F8B\u6765\u6839\u636EId\u67E5\u8BE2User\uFF1A</p><ol><li>\u5B9A\u4E49\u5305\u542B\u81EA\u5B9A\u4E49\u751F\u6210\u7684\u52A8\u6001SQL\u7684\u7C7B\uFF0C\u6BD4\u5982UserDaoProvider</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> pdai
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoProvider</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SQL</span> sql <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sql<span class="token punctuation">.</span><span class="token function">SELECT</span><span class="token punctuation">(</span><span class="token string">&quot;u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sql<span class="token punctuation">.</span><span class="token function">FROM</span><span class="token punctuation">(</span><span class="token string">&quot;tb_user u&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sql<span class="token punctuation">.</span><span class="token function">WHERE</span><span class="token punctuation">(</span><span class="token string">&quot;id = &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sql<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>\u901A\u8FC7@SelectProvider\u6CE8\u89E3\u5173\u8054\u5230\u5B9A\u4E49\u7684\u7C7B\u548C\u65B9\u6CD5</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ResultMap</span><span class="token punctuation">(</span><span class="token string">&quot;UserResult&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SelectProvider</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">UserDaoProvider</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;findById&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">User</span> <span class="token function">findById2</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u8FDB\u4E00\u6B65\u7406\u89E3" tabindex="-1"><a class="header-anchor" href="#_4-\u8FDB\u4E00\u6B65\u7406\u89E3" aria-hidden="true">#</a> 4. \u8FDB\u4E00\u6B65\u7406\u89E3</h2><blockquote><p>\u8BA9\u6211\u4EEC\u901A\u8FC7\u51E0\u4E2A\u95EE\u9898\uFF0C\u8FDB\u4E00\u6B65\u7406\u89E3MyBatis\u6CE8\u89E3\u65B9\u5F0F\u3002</p></blockquote><h3 id="_4-1-\u5176\u5B83\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_4-1-\u5176\u5B83\u6CE8\u89E3" aria-hidden="true">#</a> 4.1 \u5176\u5B83\u6CE8\u89E3</h3><ul><li><code>@CacheNamespace</code> \uFF1A\u4E3A\u7ED9\u5B9A\u7684\u547D\u540D\u7A7A\u95F4 (\u6BD4\u5982\u7C7B) \u914D\u7F6E\u7F13\u5B58\u3002\u5BF9\u5E94xml\u4E2D\u7684<code>&lt;cache&gt;</code>\u3002</li><li><code>@CacheNamespaceRef</code> \uFF1A\u53C2\u7167\u53E6\u5916\u4E00\u4E2A\u547D\u540D\u7A7A\u95F4\u7684\u7F13\u5B58\u6765\u4F7F\u7528\u3002\u5C5E\u6027:value,\u5E94\u8BE5\u662F\u4E00\u4E2A\u540D\u7A7A\u95F4\u7684\u5B57 \u7B26\u4E32\u503C(\u4E5F\u5C31\u662F\u7C7B\u7684\u5B8C\u5168\u9650\u5B9A\u540D) \u3002\u5BF9\u5E94xml\u4E2D\u7684<code>&lt;cacheRef&gt;</code>\u6807\u7B7E\u3002</li><li><code>@ConstructorArgs</code> \uFF1A\u6536\u96C6\u4E00\u7EC4\u7ED3\u679C\u4F20\u9012\u7ED9\u4E00\u4E2A\u52AB\u593A\u5BF9\u8C61\u7684 \u6784\u9020\u65B9\u6CD5\u3002\u5C5E\u6027:value,\u662F\u5F62\u5F0F\u53C2\u6570 \u7684\u6570\u7EC4\u3002</li><li><code>@Arg</code> \uFF1A\u5355 \u72EC \u7684 \u6784 \u9020 \u65B9 \u6CD5 \u53C2 \u6570 , \u662F ConstructorArgs \u96C6\u5408\u7684\u4E00\u90E8\u5206\u3002\u5C5E\u6027: id,column,javaType,typeHandler\u3002id \u5C5E\u6027\u662F\u5E03\u5C14\u503C, \u6765\u6807\u8BC6\u7528\u4E8E\u6BD4\u8F83\u7684\u5C5E \u6027,\u548CXML \u5143\u7D20\u76F8\u4F3C\u3002\u5BF9\u5E94xml\u4E2D\u7684<code>&lt;arg&gt;</code>\u6807\u7B7E\u3002</li><li><code>@Case</code> \uFF1A\u5355\u72EC\u5B9E\u4F8B\u7684\u503C\u548C\u5B83\u5BF9\u5E94\u7684\u6620\u5C04\u3002\u5C5E\u6027: value,type,results\u3002Results \u5C5E\u6027\u662F\u7ED3 \u679C\u6570\u7EC4,\u56E0\u6B64\u8FD9\u4E2A\u6CE8\u89E3\u548C\u5B9E\u9645\u7684 ResultMap \u5F88\u76F8\u4F3C,\u7531\u4E0B\u9762\u7684 Results \u6CE8\u89E3\u6307\u5B9A\u3002\u5BF9\u5E94xml\u4E2D\u6807\u7B7E<code>&lt;case&gt;</code>\u3002</li><li><code>@TypeDiscriminator</code> : \u4E00\u7EC4\u5B9E\u4F8B\u503C\u88AB\u7528\u6765\u51B3\u5B9A\u7ED3\u679C\u6620\u5C04\u7684\u8868 \u73B0\u3002 \u5C5E\u6027: column, javaType, jdbcType, typeHandler,cases\u3002cases \u5C5E\u6027\u5C31\u662F\u5B9E \u4F8B\u7684\u6570\u7EC4\u3002\u5BF9\u5E94xml\u4E2D\u6807\u7B7E<code>&lt;discriminator&gt;</code>\u3002</li><li><code>@Flush</code>\uFF1A \u5728MyBatis 3.3\u4EE5\u4E0A\u7248\u672C\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u6CE8\u89E3\u5728Mapper\u63A5\u53E3\u4E2D\u8C03\u7528SqlSession#flushStatements()\u3002</li></ul><h3 id="_4-2-xml\u65B9\u5F0F\u548C\u6CE8\u89E3\u65B9\u5F0F\u878D\u5408" tabindex="-1"><a class="header-anchor" href="#_4-2-xml\u65B9\u5F0F\u548C\u6CE8\u89E3\u65B9\u5F0F\u878D\u5408" aria-hidden="true">#</a> 4.2 xml\u65B9\u5F0F\u548C\u6CE8\u89E3\u65B9\u5F0F\u878D\u5408</h3><p>xml\u65B9\u5F0F\u548C\u6CE8\u89E3\u65B9\u5F0F\u662F\u53EF\u4EE5\u878D\u5408\u5199\u7684\uFF0C \u6211\u4EEC\u53EF\u4EE5\u5C06\u590D\u6742\u7684SQL\u5199\u5728xml\u4E2D</p><p>\u6BD4\u5982\u5C06resultMap\u5B9A\u4E49\u5728xml\u4E2D</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserResult3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span>     <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>       	<span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>      		<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_name<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>    	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span>        	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneNumber<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phone_number<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tech.pdai.springboot.mysql57.mybatis.xml.entity.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_key<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span>  	<span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u65B9\u6CD5\u4E2D\u7528@ResultMap</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ResultMap</span><span class="token punctuation">(</span><span class="token string">&quot;UserResult3&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time from tb_user u&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">User</span> <span class="token function">findAll1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-\u4E3A\u4EC0\u4E48\u7EAF\u6CE8\u89E3\u65B9\u5F0F\u4E0D\u662F\u6700\u4F73\u9009\u62E9" tabindex="-1"><a class="header-anchor" href="#_4-3-\u4E3A\u4EC0\u4E48\u7EAF\u6CE8\u89E3\u65B9\u5F0F\u4E0D\u662F\u6700\u4F73\u9009\u62E9" aria-hidden="true">#</a> 4.3 \u4E3A\u4EC0\u4E48\u7EAF\u6CE8\u89E3\u65B9\u5F0F\u4E0D\u662F\u6700\u4F73\u9009\u62E9?</h3><blockquote><p>\u7EAF\u6CE8\u89E3\u65B9\u5F0F\u4E3A\u4F55\u5F88\u5C11\u5927\u89C4\u6A21\u5462\uFF1F \u8BF4\u8BF4\u6211\u7684\u4E00\u4E9B\u770B\u6CD5</p></blockquote><ul><li>\u5BF9\u4E8E\u590D\u6742\u7684SQL\uFF0C\u7279\u522B\u662F\u6309\u7167\u6761\u4EF6\u52A8\u6001\u751F\u6210\u65B9\u5F0F\u6781\u4E3A\u4E0D\u4FBF\uFF0C\u5373\u4FBF\u6709<code>&lt;script&gt;</code>\uFF0C \u4EE3\u7801\u7684\u9605\u8BFB\u4F53\u9A8C\u548C\u7EF4\u62A4\u6781\u4E3A\u4E0D\u4F73\uFF1B</li><li>\u5BF9\u4E8E\u590D\u6742\u7684SQL\uFF0C\u5373\u4FBF\u6709@Provider\u65B9\u5F0F\uFF0C\u8FD9\u79CD\u5145\u5176\u91CF\u662F\u4E00\u4E2A\u534A\u6210\u54C1 <ul><li>\u4E0D\u662F\u6240\u89C1\u5373\u6240\u5F97\u7684\u5199\u6CD5\uFF0C\u9700\u8981\u518D\u5B9A\u4E49\u989D\u5916\u7684\u7C7B\u548C\u65B9\u6CD5</li><li>\u52A8\u6001\u6784\u5EFA\u65F6\u4E0D\u4FBF\u5229</li><li>\u51FD\u6570\u5F0F\u7F16\u7A0B\u6210\u4E3A\u4E3B\u6D41\uFF0Clambda\u65B9\u5F0F\u624D\u662F\u672A\u6765</li><li>...</li></ul></li></ul><p>\u8FD9\u4E5F\u662Fmybatis-plus\u7B49\u5DE5\u5177\u6539\u8FDB\u7684\u5730\u65B9\u3002</p><h2 id="\u53C2\u8003\u6587\u7AE0" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u7AE0" aria-hidden="true">#</a> \u53C2\u8003\u6587\u7AE0</h2>`,86),i={href:"https://pdai.tech/md/spring/springboot/springboot-x-mysql-mybatis-anno.html",target:"_blank",rel:"noopener noreferrer"},r=n("strong",null,"SpringBoot\u96C6\u6210MySQL - MyBatis \u6CE8\u89E3\u65B9\u5F0F",-1);function k(d,m){const a=u("ExternalLinkIcon");return t(),p("div",null,[l,n("p",null,[n("a",i,[r,e(a)])])])}const g=s(c,[["render",k],["__file","MyBatis-i-anotation.html.vue"]]);export{g as default};
